<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>æ•°æ®ç»“æ„ä¹‹æ•°ç»„</title>
    <url>/2022/08/21/Algorithm/DataStructure/Array/</url>
    <content><![CDATA[<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><blockquote>
<p>æ•°ç»„æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œæ˜¯æœ‰é™ä¸ªç›¸åŒç±»å‹çš„å˜é‡æ‰€ç»„æˆçš„æœ‰åºé›†åˆï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå˜é‡è¢«ç§°ä¸ºå…ƒç´ ã€‚</p>
</blockquote>
<p>ä»¥æ•´å‹æ•°ç»„ä¸ºä¾‹ï¼Œæ•°ç»„çš„å­˜å‚¨å½¢å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>æ•°æ®</th>
<th>2</th>
<th>3</th>
<th>6</th>
<th>1</th>
<th>4</th>
<th>0</th>
<th>6</th>
<th>8</th>
<th>2</th>
</tr>
</thead>
<tbody><tr>
<td>ä¸‹æ ‡</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
</tr>
</tbody></table>
<p>å¦‚ä½ æ‰€è§ï¼Œæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å­˜åœ¨ä¸€ä¸ªç›¸åº”çš„â€œç¼–å·â€ï¼Œå°±æ˜¯<strong>ä¸‹æ ‡ã€‚ä¸‹æ ‡ä»0å¼€å§‹ï¼Œä¸€ç›´åˆ°æ•°ç»„çš„é•¿åº¦-1ã€‚</strong></p>
<p>æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯<strong>é¡ºåºå­˜å‚¨çš„</strong>ï¼Œè€Œå†…å­˜æ˜¯ç”±ä¸€ä¸ªä¸ªè¿ç»­çš„<strong>å†…å­˜å•å…ƒ</strong>ç»„æˆï¼Œæ¯ä¸€ä¸ªå†…å­˜å•å…ƒéƒ½æœ‰è‡ªå·±çš„åœ°å€ã€‚æ•°ç»„ä¸­çš„æ¯ä¸€å…ƒç´ éƒ½å­˜å‚¨åœ¨å†…å­˜å•å…ƒä¸­ï¼Œè€Œä¸”å…ƒç´ ä¹‹é—´ç´§å¯†æ’åˆ—ï¼Œæ—¢ä¸èƒ½æ‰“ä¹±å…ƒç´ çš„å­˜å‚¨é¡ºåºï¼Œä¹Ÿä¸èƒ½è·³è¿‡æŸä¸ªå­˜å‚¨å•å…ƒè¿›è¡Œå­˜å‚¨ã€‚</p>
<p><img    class="lazyload" data-original="https://s2.loli.net/2022/08/21/SiIxbFyO72vRsDz.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="   ><span class="image-caption">æ•°ç»„å­˜å‚¨ç¤ºæ„å›¾</span></p>
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œå·§å…‹åŠ›é»„è‰²çš„æ ¼å­ä»£è¡¨ç©ºé—²çš„å­˜å‚¨å•å…ƒï¼Œç°è‰²çš„æ ¼å­ä»£è¡¨å·²å ç”¨çš„å­˜å‚¨å•å…ƒï¼Œè€Œæ·¡ç»¿è‰²çš„è¿ç»­æ ¼å­ä»£è¡¨æ•°ç»„åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚</p>
<h1 id="è¯»å–å…ƒç´ "><a href="#è¯»å–å…ƒç´ " class="headerlink" title="è¯»å–å…ƒç´ "></a>è¯»å–å…ƒç´ </h1><p>è¯»å–å…ƒç´ æ˜¯æ•°ç»„æœ€ç®€å•çš„æ“ä½œï¼Œç”±äºæ•°ç»„åœ¨å†…å­˜ä¸­é¡ºåºå­˜å‚¨ï¼Œæ‰€ä»¥åªè¦ç»™å‡ºä¸€ä¸ªæ•°ç»„ä¸‹æ ‡ï¼Œå°±å¯ä»¥è¯»å–åˆ°å¯¹åº”çš„æ•°ç»„å…ƒç´ ã€‚</p>
<p>å‡è®¾æœ‰ä¸€ä¸ªåä¸º<code>array</code>çš„æ•°ç»„ï¼Œæƒ³è¦è¯»å–æ•°ç»„ä¸‹æ ‡ä¸º4çš„å…ƒç´ ï¼Œå°±å†™ä½œ<code>array[4]</code>ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¾“å…¥çš„ä¸‹æ ‡å¿…é¡»åœ¨æ•°ç»„çš„é•¿åº¦èŒƒå›´ä¹‹å†…ï¼Œå¦åˆ™ä¼šå‡ºç°æ•°ç»„è¶Šç•Œï¼å¦‚æœæ•°ç»„çš„é•¿åº¦ä¸ºxï¼Œè¾“å…¥çš„ä¸‹æ ‡ä¸ºyï¼Œé‚£ä¹ˆç»“åˆä¸‹æ ‡ä»0å¼€å§‹çš„ç‰¹ç‚¹ï¼Œå°±å¯ä»¥å¾—å‡º<strong>y<sub>max</sub>&#x3D;x-1</strong>ã€‚</p>
<p>ç®€å•çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">2</span>&#125;;<br><span class="hljs-comment">//æ‰“å°æ•°ç»„ä¸­ä¸‹æ ‡ä¸º4çš„å…ƒç´ </span><br>System.out.println(array[<span class="hljs-number">4</span>]);<br></code></pre></td></tr></table></figure>

<h1 id="æ›´æ–°å…ƒç´ "><a href="#æ›´æ–°å…ƒç´ " class="headerlink" title="æ›´æ–°å…ƒç´ "></a>æ›´æ–°å…ƒç´ </h1><p>æ›´æ–°å…ƒç´ ä¹Ÿæ˜¯éå¸¸ç®€å•çš„æ“ä½œï¼Œç›´æ¥åˆ©ç”¨ä¸‹æ ‡å°±å¯ä»¥æŠŠæ–°å€¼èµ‹ç»™è¯¥å…ƒç´ ã€‚</p>
<p>ç®€å•çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">2</span>&#125;;<br><span class="hljs-comment">//ä¸ºæ•°ç»„ä¸‹æ ‡ä¸º2çš„å…ƒç´ èµ‹ä¸Šæ–°å€¼</span><br>array[<span class="hljs-number">2</span>] = <span class="hljs-number">10</span>;<br><span class="hljs-comment">//æ‰“å°æ•°ç»„ä¸­ä¸‹æ ‡ä¸º2çš„å…ƒç´ </span><br>System.out.println(array[<span class="hljs-number">2</span>]);<br></code></pre></td></tr></table></figure>

<p>å¾…å®Œæˆâ€¦â€¦</p>
<h1 id="æ’å…¥å…ƒç´ "><a href="#æ’å…¥å…ƒç´ " class="headerlink" title="æ’å…¥å…ƒç´ "></a>æ’å…¥å…ƒç´ </h1><h1 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h1><h1 id="æ•°ç»„çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿"><a href="#æ•°ç»„çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿" class="headerlink" title="æ•°ç»„çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿"></a>æ•°ç»„çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿</h1>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>å¦‚ä½•ä¼˜é›…çš„è¿›è¡Œ Bean æ³¨å…¥</title>
    <url>/2020/10/30/Spring/base/RequiredArgsConstructor/</url>
    <content><![CDATA[<p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæœ€è¿‘å¬åˆ°è®¸å¤šåå¯¹ä½¿ç”¨<code>Lombok</code>çš„å£°éŸ³ï¼Œè¯´ä»€ä¹ˆå½±å“ä»£ç å¯è¯»æ€§ï¼Œå…·æœ‰ä¾µå…¥æ€§ã€‚ï¼ˆå¼±å¼±çš„é—®ä¸€å¥ï¼Œ<code>Entity</code>è¦ä»€ä¹ˆå¯è¯»æ€§ï¼Ÿï¼‰è¿™æ˜¯æˆ‘ä»ä¸Šå­¦çš„æ—¶å€™è®¤è¯†<code>Lombok</code>ä»¥æ¥ï¼Œç¬¬ä¸€æ¬¡å¬åˆ°è¿™æ ·çš„å£°éŸ³ã€‚</p>
<span id="more"></span>

<p>åœ¨æˆ‘çœ‹æ¥ï¼Œ<code>Lombok</code>å¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚ä¸¾ä¸ªæ —å­ï¼Œåœ¨æˆ‘æœ€è¿‘å·¥ä½œæ‰€å¼€å‘çš„ERPç³»ç»Ÿä¸­ï¼Œç”±äºè¡Œä¸šçš„ç‰¹æ®Šæ€§ï¼Œä¸€å¼ è¡¨åŠ¨è¾„ä¸ƒå…«åä¸ªå­—æ®µï¼Œéš¾é“ä½ ä¼šä¸º<code>Entity</code>ä¸€ä¸ªä¸€ä¸ªçš„å»å†™<code>set</code>å’Œ<code>get</code>æ–¹æ³•ï¼Ÿæˆ–è€…è¯´ä½¿ç”¨ä¸€äº›å·¥å…·å»ç”Ÿæˆï¼Ÿåæ­£æˆ‘æ‰“æ­»éƒ½ä¸ä¼šå¹²çš„ï¼Œæ¯•ç«Ÿäººç±»åªæœ‰è¶Šæ¥è¶Šâ€œæ‡’â€ï¼Œæ‰ä¼šæƒ³å°½ä¸€åˆ‡åŠæ³•å»æé«˜ç”Ÿäº§åŠ›ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æš‚ä¸”ä¸è°ˆ<code>Lombok</code>çš„ä¼˜åŠ£ï¼Œæœ€è¿‘æˆ‘åœ¨çˆ¬å¸–å­æ—¶å‘ç°äº†ä¸€ä¸ªæ³¨è§£ï¼Œå¯ä»¥ä¼˜é›…çš„åœ¨ <code>Spring</code> é¡¹ç›®ä¸­è¿›è¡Œ <code>Bean</code> æ³¨å…¥ï¼š<code>@RequiredArgsConstructor</code>ï¼Œè¿™ä¸ªæ³¨è§£åˆ™ç”±<code>Lombok</code>æä¾›ã€‚ä»è¿™ä¸ªå•è¯æ¥ç†è§£ï¼Œå¤§è‡´å°±æ˜¯ï¼Œ<code>å¿…é¡»çš„å‚æ•°æ„é€ å™¨</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªæ³¨è§£åˆæ˜¯æ€ä¹ˆå’Œ<code>Bean</code>æ³¨å…¥æ‰¯ä¸Šå…³ç³»çš„ï¼Ÿå‘ä¸‹çœ‹ã€‚</p>
<h1 id="Beanæ³¨å…¥ä¹±è±¡"><a href="#Beanæ³¨å…¥ä¹±è±¡" class="headerlink" title="Beanæ³¨å…¥ä¹±è±¡"></a>Beanæ³¨å…¥ä¹±è±¡</h1><p><code>Spring</code>æä¾›äº†ä¸‰ç§æ³¨å…¥æ¨¡å¼ï¼Œä¸€ç§æ˜¯<code>å±æ€§æ³¨å…¥</code>(Filed injection)ï¼Œä¸€ç§æ˜¯é€šè¿‡<code>setter</code>æ–¹æ³•ï¼Œä¸€ç§æ˜¯<code>æ„é€ å™¨æ³¨å…¥</code>ã€‚å°±ç›®å‰æƒ…å†µæ¥çœ‹ï¼Œè®¸å¤šçš„é¡¹ç›®çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> ARepo aRepo;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BRepo bRepo;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> CRepo cRepo;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> DRepo dRepo;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> ERepo eRepo;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ ·çš„ä½¿ç”¨æ–¹æ³•æœ¬èº«æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œçœ‹èµ·æ¥è¿˜è›®æ•´æ´å“ˆï¼Œå¯çœŸå®é¡¹ç›®é‡Œå´æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img    class="lazyload" data-original="https://i.loli.net/2020/10/30/prTUYI6gBobwP9F.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="   ><span class="image-caption">çœŸå®é¡¹ç›®æˆªå›¾</span></p>
<p><code>Spring</code>ä»4.0å¼€å§‹ï¼Œ<strong>å°± ä¸ æ¨ è ä½¿ ç”¨ å± æ€§ æ³¨ å…¥ æ¨¡ å¼ äº†ï¼Œ</strong>åŸå› æ˜¯å®ƒå¯ä»¥è®©æˆ‘ä»¬å¿½ç•¥æ‰ä¸€äº›ä»£ç å¯èƒ½å˜åçš„éšæ‚£ï¼ŒåŒæ—¶è¿™æ ·çš„å†™æ³•ä¹Ÿä½¿<code>IDEA</code>å‘ä½ å‘å‡º<code>é»„è‰²è­¦å‘Š</code>!</p>
<p>æ—¢ç„¶<code>Spring</code>æ¨èä½¿ç”¨æ˜¾å¼çš„<code>Setter</code>å’Œ<code>æ„é€ å™¨æ–¹å¼</code>ï¼Œé‚£æˆ‘ä»¬å°±åˆ‡æ¢ä¸€ä¸‹å®ç°æ–¹æ¡ˆã€‚</p>
<h1 id="è¿™ä¸ªæ ·å­å¾ˆä¼˜é›…"><a href="#è¿™ä¸ªæ ·å­å¾ˆä¼˜é›…" class="headerlink" title="è¿™ä¸ªæ ·å­å¾ˆä¼˜é›…"></a>è¿™ä¸ªæ ·å­å¾ˆä¼˜é›…</h1><p><code>Setter</code>æ–¹å¼æ˜¾ç„¶ä¸å¯èƒ½ï¼Œæˆ‘å¯ä¸æƒ³æŠŠ<code>Setter</code>ä»£ç ç”Ÿæˆå·¥å…·ç©åˆ°åï¼Œé‚£ä¹ˆå°±å‰©ä¸‹äº†<code>æ„é€ å™¨æ–¹å¼</code>ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ARepo aRepo;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserServiceImpl</span> <span class="hljs-params">(ARepo aRepo)</span> &#123;<br>        <span class="hljs-built_in">this</span>.aRepo = aRepo;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æˆ–è€…â€¦â€¦åƒè¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ARepo aRepo;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> BRepo bRepo;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> CRepo cRepo;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DRepo dRepo;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ERepo eRepo;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserServiceImpl</span> <span class="hljs-params">(ARepo aRepo,BRepo bRepo,CRepo cRepo</span><br><span class="hljs-params">                            ,DRepo dRepo,ERepo eRepo)</span> &#123;<br>        <span class="hljs-built_in">this</span>.aRepo = aRepo;<br>        <span class="hljs-built_in">this</span>.bRepo = bRepo;<br>        <span class="hljs-built_in">this</span>.cRepo = cRepo;<br>        <span class="hljs-built_in">this</span>.dRepo = dRepo;<br>        <span class="hljs-built_in">this</span>.eRepo = eRepo;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>emmmï¼Œè¦æ˜¯è¿™æ ·çš„è¯ï¼Œæˆ‘å®æ„¿ç”¨<code>@Autowired</code>ã€‚</p>
<p>å½“æ³¨å…¥çš„<code>Bean</code>å˜å¤šä¹‹åï¼Œæ„é€ å™¨ä¾¿æ˜¾å¾—è¶…çº§è‡ƒè‚¿ï¼Œè¿™ä¸ªæ—¶å€™<code>@RequiredArgsConstructor</code>å°±æ´¾ä¸Šäº†å¤§ç”¨åœºï¼Œæ¥çœ‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <br>    <span class="hljs-keyword">final</span> ARepo aRepo;<br>    <span class="hljs-keyword">final</span> BRepo bRepo;<br>    <span class="hljs-keyword">final</span> CRepo cRepo;<br>    <span class="hljs-keyword">final</span> DRepo dRepo;<br>    <span class="hljs-keyword">final</span> ERepo eRepo;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å—¯ï¼Œè¿™æ‰æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ ·å­ï¼Œç›¸ä¿¡èªæ˜çš„ä½ å·²ç»æ˜ç™½äº†<code>@RequiredArgsConstructor</code>ä¼šåœ¨ç¼–è¯‘æ—¶å¸®ä½ ç”Ÿæˆé‚£ä¸ªåˆè‡­åˆé•¿çš„æ„é€ å™¨ï¼Œè¾¾åˆ°äº†<code>Bean</code>æ³¨å…¥çš„ç›®çš„ã€‚</p>
<p>å¥½äº†ï¼Œå¦‚æ­¤ä¼˜é›…çš„æ³¨å…¥ï¼Œè¿˜ä¸å¿«æ‹¿å»äº«ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>ç›¸å¯¹è§„èŒƒçš„æœåŠ¡APIåº”å¦‚ä½•å®ç°</title>
    <url>/2022/08/18/Spring/base/StandardApi/</url>
    <content><![CDATA[<blockquote>
<p>æ ‡å‡†è§„èŒƒçš„æ¥å£å¯ä»¥é™ä½å‰åç«¯å¼€å‘äººå‘˜ä¹‹é—´çš„æ²Ÿé€šæˆæœ¬ï¼Œå¹¶ä¸”èƒ½å¤Ÿé™ä½åç«¯æœåŠ¡è‡ªèº«çš„åæœŸç»´æŠ¤éš¾åº¦ã€‚</p>
</blockquote>
<h1 id="è¯·æ±‚ä¸å“åº”"><a href="#è¯·æ±‚ä¸å“åº”" class="headerlink" title="è¯·æ±‚ä¸å“åº”"></a>è¯·æ±‚ä¸å“åº”</h1><p>è¯·æ±‚ä¸å“åº”å‚æ•°æ˜¯å‰åç«¯å¼€å‘äººå‘˜å¯¹æ¥çš„é‡è¦å…³æ³¨ç‚¹ï¼Œå¦‚æœåç«¯ API ä¸èƒ½å‘å‰ç«¯ï¼ˆç”šè‡³æ˜¯è‡ªå·±ï¼‰æ¸…æ™°çš„ä¼ è¾¾<strong>æˆ‘æ¥æ”¶ä»€ä¹ˆï¼Œæˆ‘è¿”å›ä»€ä¹ˆ</strong>çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¯¹äºåŒæ–¹æ¥è¯´ï¼Œè¿™éƒ½æ˜¯ä¸€ç§ç¾éš¾ã€‚</p>
<h2 id="é€šç”¨çš„-ApiResult"><a href="#é€šç”¨çš„-ApiResult" class="headerlink" title="é€šç”¨çš„ ApiResult"></a>é€šç”¨çš„ <code>ApiResult</code></h2><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiResult</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">2747440445733983051L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * çŠ¶æ€</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Integer status;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String msg;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å“åº”æ•°æ®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> T payload;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¨‹åºå¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String exception;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„<code>ApiResult</code>ç¤ºä¾‹ï¼Œä½ æ‰€å¼€å‘çš„æ¯ä¸€ä¸ªæ¥å£å“åº”å‚æ•°éƒ½åº”è¯¥æ˜¯å®ƒï¼Œå®ƒæ˜¯<strong>å¤„äºé¡¶å±‚çš„å“åº”å‚æ•°ç»“æ„</strong>ï¼Œé€šè¿‡æŒ‡å®šä¸åŒçš„æ³›å‹é€‚åº”å„ä¸ªæ¥å£çš„éœ€æ±‚ã€‚å„ä¸ªå‚æ•°ä½œç”¨å¦‚ä¸‹:</p>
<ul>
<li>status <strong>çŠ¶æ€ç </strong>ï¼Œç”¨ä¸åŒçš„æ•°å­—è¡¨ç¤ºå½“å‰æ¥å£å¤„ç†å®Œæˆåçš„ç»“æœçŠ¶æ€ã€‚è¯·ä¸è¦ä¸ Http çš„çŠ¶æ€æ··ä¸ºä¸€è°ˆï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç›´æ¥ä½¿ç”¨ Http çš„çŠ¶æ€æ¥è¡¨ç¤ºã€‚ Http çš„çŠ¶æ€æ¯æ¬¡è¯·æ±‚éƒ½åº”è¯¥æ˜¯ 200 çš„ï¼Œå¤„ç†çš„ç»“æœåº”ç”±å“åº”å‚æ•°æ¥ä½“ç°ã€‚</li>
<li>msg <strong>ä¿¡æ¯</strong>ï¼Œåç«¯æœåŠ¡æç¤ºç”¨æˆ·æ¶ˆæ¯çš„ä¸»è¦é€”å¾„ï¼Œå› ä¸ºè®¸å¤šçš„æç¤ºä¿¡æ¯ï¼ˆæ­£ç¡®æˆ–é”™è¯¯ï¼‰éƒ½æ˜¯åœ¨åç«¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ‰ä¼šå‡ºç°ã€‚ä¸€èˆ¬è¿™ä¸ªä¿¡æ¯å‰ç«¯éœ€è¦ä½¿ç”¨å¼¹çª—ã€æ¨ªå¹…æˆ–å…¶ä»–æ‰‹æ®µå»ä¼ è¾¾ç»™ç”¨æˆ·ã€‚</li>
<li>payload <strong>å“åº”æ•°æ®</strong>ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯æ¥å£å“åº”çš„å…·ä½“ä¸šåŠ¡æ•°æ®ã€‚</li>
<li>exception <strong>ç¨‹åºå¼‚å¸¸ä¿¡æ¯</strong>ï¼Œç»“åˆè‡ªå·±çš„å¼€å‘ç»éªŒï¼Œè§‰å¾—éœ€è¦è¿™æ ·ä¸€ä¸ªå‚æ•°æ¥å¸®åŠ©å¼€å‘è€…æ›´å¿«çš„å®šä½é—®é¢˜ã€‚ä¾‹å¦‚å‘ç”ŸæŸä¸ªå¼‚å¸¸ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯è¯¥å¼‚å¸¸çš„å…·ä½“ä¿¡æ¯<code>e.getMessage()</code>ï¼Œæ‰€ä»¥å¼€å‘äººå‘˜åªéœ€é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·å°±èƒ½æ‰¾åˆ°å‘ç”Ÿå¼‚å¸¸çš„åŸå› ã€‚æ³¨æ„è¿™ä¸ªä¿¡æ¯æ˜¯ä¸èƒ½ä¼ è¾¾ç»™ç”¨æˆ·çš„ï¼</li>
</ul>
<p>å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯å»å‘½åè¿™äº›å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸º<code>ApiResult</code>æ‰©å±•ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œä½¿å¾—æ¥å£åœ¨æ„å»ºå“åº”å‚æ•°æ—¶æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h2 id="çŠ¶æ€ç æšä¸¾"><a href="#çŠ¶æ€ç æšä¸¾" class="headerlink" title="çŠ¶æ€ç æšä¸¾"></a>çŠ¶æ€ç æšä¸¾</h2><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Getter</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ApiStatusEnum</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æˆåŠŸ</span><br><span class="hljs-comment">     */</span><br>    SUCCESS(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;å¤„ç†æˆåŠŸ&quot;</span>),<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æœªæˆæƒï¼ˆç™»å½•ä¿¡æ¯æœ‰è¯¯ï¼Œéœ€è¦é‡æ–°ç™»å½•ï¼‰</span><br><span class="hljs-comment">     */</span><br>    UNAUTHORIZED(<span class="hljs-number">401</span>, <span class="hljs-string">&quot;æœªæˆæƒï¼ˆç™»å½•ä¿¡æ¯æœ‰è¯¯ éœ€è¦é‡æ–°ç™»å½•ï¼‰&quot;</span>),<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ— æ“ä½œæƒé™</span><br><span class="hljs-comment">     */</span><br>    NO_PERMISSIONS(<span class="hljs-number">403</span>, <span class="hljs-string">&quot;æ— æ“ä½œæƒé™&quot;</span>),<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤±è´¥</span><br><span class="hljs-comment">     */</span><br>    FAIL(<span class="hljs-number">500</span>, <span class="hljs-string">&quot;å¤„ç†å¤±è´¥&quot;</span>);<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * çŠ¶æ€ç </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer status;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æç¤ºæ¶ˆæ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String msg;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªçŠ¶æ€ç æšä¸¾ç¤ºä¾‹ï¼Œå®ƒçš„<code>status</code>æœ€ç»ˆä¼šä½“ç°åœ¨<code>ApiResult</code>çš„<code>status</code>ä¸­ï¼Œå‰ç«¯å¾—ä»¥æ ¹æ®ä¸åŒçš„çŠ¶æ€ç è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œæ·»åŠ ã€‚å¯ä»¥å‚è€ƒ http æ ‡å‡†çš„çŠ¶æ€ç åˆ—ä¸¾ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¸šåŠ¡ç›¸è¿‘çš„ http çŠ¶æ€ç å°‘ä¹‹åˆå°‘ï¼Œæ‰€ä»¥<strong>æŒ‰ç…§æ•°å­—é¡ºåºä¸æ–­è‡ªå¢åˆ—ä¸¾</strong>çš„æ–¹å¼ä¹Ÿæ˜¯å¯å–çš„ã€‚</p>
<h2 id="ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°"><a href="#ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°" class="headerlink" title="ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°"></a>ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°</h2><p><strong>ä¸€ä¸ªä¼˜ç§€çš„ API æ¥å£ï¼Œæ˜¯ä¸éœ€è¦ç¿»é˜…å…·ä½“ä»£ç å°±èƒ½çŸ¥é“å®ƒçš„è¯·æ±‚ä¸å“åº”å‚æ•°çš„ã€‚</strong></p>
<p>ä¸çŸ¥é“æœ‰å¤šå°‘äººå–œæ¬¢ä½¿ç”¨<code>Map</code>æˆ–è€…ç±»ä¼¼äº<code>Map</code>çš„ç±»å»æ¥æ”¶å’Œå“åº”æ•°æ®ï¼Œç”šè‡³æ˜¯ä½¿ç”¨<code>String</code>æ­é…ä¸€äº› Json å·¥å…·å»å¤„ç†ã€‚è¿™æ˜¯éå¸¸æ„šè ¢çš„æ“ä½œã€‚å½“ç„¶ï¼Œçˆ½æ˜¯çœŸçš„çˆ½ï¼Œä½†æ˜¯è¿™æ ·çš„çˆ½éå¸¸è‡ªç§ã€‚å¯¹äºè°ƒç”¨è€…<sub>1</sub>æ¥è¯´ï¼Œè¿™æ ·çš„çš„æ¥å£å°±åƒæ˜¯ä¸€ä¸ªé»‘ç›’å­ï¼Œå¿…é¡»ç¿»é˜…å…·ä½“çš„ä»£ç æ‰èƒ½çœ‹åˆ°å®ƒæ¥æ”¶ä»€ä¹ˆã€è¿”å›ä»€ä¹ˆã€‚å¯æ˜¯ä»–åªæƒ³è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªæ¥å£ï¼Œè‡³äºé‡Œè¾¹æ€ä¹ˆåšçš„ä»–ä¸éœ€è¦å…³å¿ƒã€‚è¿™åˆç†å—ï¼Ÿè¿™ä¸€ç‚¹éƒ½ä¸åˆç†ï¼</p>
<p>ä½¿ç”¨å®ä½“ç±»å£°æ˜å°±èƒ½å¾ˆå¥½çš„é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿä¸¥æ ¼è§„å®šè¿™ä¸ªæ¥å£çš„è¯·æ±‚ä¸è¿”å›ï¼Œä¸æ˜¯<code>Map</code>ã€<code>String</code>è¿™æ ·çš„â€œæ¥è€…ä¸æ‹’â€œã€‚</p>
<p>[1] è°ƒç”¨è€…ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œè®¸å¤šæ¥å£ä¸ä»…å‘å‰ç«¯æä¾›ï¼Œä¹Ÿä¼šå‘å…¶ä»–æœåŠ¡æä¾›ï¼Œæ­¤å¤„çš„è°ƒç”¨è€…æŒ‡åç«¯å¼€å‘äººå‘˜ã€‚</p>
<h3 id="å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»"><a href="#å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»" class="headerlink" title="å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»"></a>å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»</h3><p>ä¸ªäººç»éªŒï¼Œè§‰å¾—<strong>æ¯ä¸€ä¸ªæ¥å£éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å‚æ•°å®ä½“ç±»</strong>ã€‚</p>
<p>ä¸€äº›äººå–œæ¬¢ä½¿ç”¨<code>DTO</code>å’Œ<code>VO</code>ä½œä¸ºåç¼€å‘½åæ¥å£çš„å‚æ•°ï¼Œæˆ‘ä¸ªäººæ›´å–œæ¬¢ä½¿ç”¨<code>Req</code>å’Œ<code>Res</code>ä½œä¸ºåç¼€ï¼Œä¹Ÿå‘ä½ æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒæ›´åŠ çš„è´´åˆ‡ã€ä¸€ç›®äº†ç„¶ã€‚</p>
<p>ä¸¾ä¸€ä¸ªæ —å­ğŸŒ°ï¼Œæœ‰ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ã€è¿˜æœ‰ä¸€ä¸ªæ–°å¢ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ï¼Œé‚£ä¹ˆå®ƒçš„å‚æ•°å®ä½“ç±»ä½ç½®ä»¥åŠå‘½ååº”è¯¥åƒä¸‹é¢è¿™ä¸ªæ ·å­:</p>
<hr>
<ul>
<li>controller<ul>
<li>UserController.java <code>/user</code><ul>
<li><code>/pageList</code>æ¥å£ï¼Œæ–¹æ³•åä¸º<code>pageList</code></li>
<li><code>/add</code> æ¥å£ï¼Œæ–¹æ³•åä¸º<code>add</code></li>
</ul>
</li>
</ul>
</li>
<li>mapper</li>
<li>pojo<ul>
<li>dto<ul>
<li>user<ul>
<li>pagelist<ul>
<li>UserPageListReq.java</li>
<li>UserPageListRes.java</li>
</ul>
</li>
<li>add<ul>
<li>UserAddReq.java</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>entity</li>
<li>properties</li>
<li>redis</li>
</ul>
</li>
<li>service</li>
<li>utils</li>
</ul>
<hr>
<p>å…ˆåˆ«æ€¥ç€éª‚ï¼è¿™æ ·å»ç®¡ç†è¿™äº›å®ä½“ç±»çš„ç¡®ç›®å½•å±‚çº§è¾ƒå¤šï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ä½†æ˜¯<strong>è§„èŒƒä¸æ•ˆç‡ä¸¤ä»¶äº‹æœ¬æ¥å°±æ˜¯ä¸å¯å…¼å¾—çš„</strong>ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘è‡ªå·±è¿˜æ˜¯æ¯”è¾ƒåå‘äºè§„èŒƒçš„ã€‚</p>
<p>è¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Œé¦–å…ˆå®ä½“ç±»çš„åç§°å˜å¾—æœ‰è¿¹å¯å¾ªã€æœ‰è§„å¯ä¾ã€‚å…¶æ¬¡æ¥å£å‚æ•°å®ä½“ç±»æ‰€åœ¨<code>dto</code>åŒ…ä¸‹çš„ç›®å½•å’Œæ¥å£æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæœ‰åˆ©äºä½ çœ‹åˆ°æ¥å£å‚æ•°å®ä½“ç±»å°±èƒ½å¾ˆå¿«å®šä½åˆ°ä½¿ç”¨å®ƒçš„æ¥å£ï¼Œçœ‹åˆ°æ¥å£å°±èƒ½å¾ˆå¿«å®šä½åˆ°å®ƒçš„å‚æ•°å®ä½“ç±»ã€‚æ‰€ä»¥<strong>ä»Šæ—¥æ‰€è°“çš„éº»çƒ¦æ˜¯ä¸ºäº†ä»¥åä¸ä¼šé‡åˆ°æ›´å¤šçš„éº»çƒ¦</strong>ã€‚</p>
<h1 id="æ¨èä½¿ç”¨-Swagger"><a href="#æ¨èä½¿ç”¨-Swagger" class="headerlink" title="æ¨èä½¿ç”¨ Swagger"></a>æ¨èä½¿ç”¨ Swagger</h1><p>Swagger èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œå¯ä»¥äº¤ç»™å‰ç«¯åŒäº‹ Swagger åœ°å€ä½œä¸ºæ¥å£å¯¹æ¥ä¾æ®ï¼Œå¼€å±•å·¥ä½œã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶è¿›è¡Œå¿«é€Ÿçš„æ¥å£è°ƒç”¨ï¼Œè¿›è¡Œæ¥å£è‡ªæµ‹ã€‚</p>
<h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><h3 id="æ·»åŠ ä¾èµ–å¹¶å¯ç”¨"><a href="#æ·»åŠ ä¾èµ–å¹¶å¯ç”¨" class="headerlink" title="æ·»åŠ ä¾èµ–å¹¶å¯ç”¨"></a>æ·»åŠ ä¾èµ–å¹¶å¯ç”¨</h3><figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>SpringBoot å¯åŠ¨ç±»ä¸Šæ·»åŠ  <code>@EnableOpenApi</code> æ³¨è§£</strong></p>
<h3 id="åˆ›å»º-SwaggerProperties"><a href="#åˆ›å»º-SwaggerProperties" class="headerlink" title="åˆ›å»º SwaggerProperties"></a>åˆ›å»º <code>SwaggerProperties</code></h3><p>é€šè¿‡é…ç½®åœ¨<code>yml</code>æ–‡ä»¶ä¸­çš„<code>enabled</code>å‚æ•°æ¥æ§åˆ¶ä¸åŒç¯å¢ƒä¸‹Swaggeræ˜¯å¦å¼€å¯ã€‚å…³äº<code>yml</code>æ–‡ä»¶ä¸<code>@ConfigurationProperties</code>å¯ä»¥å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« <a href="/2022/03/10/Spring/correlation/SolveYmalWarn/">è§£å†³ Spring é…ç½®æ–‡ä»¶è­¦å‘Š</a>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;swagger&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwaggerProperties</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ˜¯å¦å¯ç”¨ Swaggerï¼Œé»˜è®¤å…³é—­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Boolean</span> <span class="hljs-variable">enabled</span> <span class="hljs-operator">=</span> Boolean.FALSE;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="åˆ›å»º-SwaggerConfig"><a href="#åˆ›å»º-SwaggerConfig" class="headerlink" title="åˆ›å»º SwaggerConfig"></a>åˆ›å»º <code>SwaggerConfig</code></h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwaggerConfig</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SwaggerProperties swaggerProperties;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Docket <span class="hljs-title function_">createRestApi</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Docket</span>(DocumentationType.OAS_30)<br>                .enable(swaggerProperties.getEnabled())<br>                .apiInfo(apiInfo())<br>                .select()<br>                <span class="hljs-comment">//æŒ‡å®šéœ€è¦è¢« Swagger æ‰«æåˆ°çš„åŒ…å</span><br>                .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">&quot;com.xxxxx.xxxx.controller&quot;</span>))<br>                .paths(PathSelectors.any())<br>                .build();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ›å»ºè¯¥APIçš„åŸºæœ¬ä¿¡æ¯ï¼ˆè¿™äº›åŸºæœ¬ä¿¡æ¯ä¼šå±•ç°åœ¨æ–‡æ¡£é¡µé¢ä¸­ï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiInfo</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title function_">apiInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiInfoBuilder</span>()<br>                .title(<span class="hljs-string">&quot;xxxé¡¹ç›®&quot;</span>)<br>                .description(<span class="hljs-string">&quot;&quot;</span>)<br>                .termsOfServiceUrl(<span class="hljs-string">&quot;&quot;</span>)<br>                .version(<span class="hljs-string">&quot;1.0&quot;</span>)<br>                .build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é¡¹ç›®å¯åŠ¨åå°±å¯ä»¥é€šè¿‡ <code>&#123;æœåŠ¡æ ¹è·¯å¾„&#125;/swagger-ui/</code> å»è®¿é—®æ–‡æ¡£äº†ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œæœ€åçš„åæ–œæ æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™æ— æ³•è®¿é—®ã€‚</p>
<h3 id="Api"><a href="#Api" class="headerlink" title="@Api"></a><code>@Api</code></h3><p><code>@Api</code>æ˜¯<strong>æ”¾ç½®åœ¨<code>Controller</code>ç±»ä¸Š</strong>çš„ï¼Œä¾‹å¦‚ç”¨æˆ·çš„<code>UserController</code>å¯ä»¥è¿™æ ·å»å†™ï¼š<code>@Api(tags = &quot;User-ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ¥å£&quot;)</code></p>
<h3 id="ApiOperation"><a href="#ApiOperation" class="headerlink" title="@ApiOperation"></a><code>@ApiOperation</code></h3><p><code>@ApiOperation</code>æ˜¯<strong>æ”¾ç½®åœ¨å…·ä½“æ¥å£ä¸Š</strong>çš„ï¼Œä¾‹å¦‚ç”¨æˆ·çš„<code>/pageList</code>æ¥å£å¯ä»¥è¿™æ ·å»å†™ï¼š<code>@ApiOperation(value = &quot;åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯&quot;)</code></p>
<h3 id="ApiModel"><a href="#ApiModel" class="headerlink" title="@ApiModel"></a><code>@ApiModel</code></h3><p><code>@ApiModel</code>æ˜¯<strong>æ”¾ç½®åœ¨è¯·æ±‚æˆ–å“åº”å®ä½“ç±»ä¸Š</strong>çš„ï¼Œä¾‹å¦‚åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°å¯ä»¥è¿™æ ·å†™ï¼š<code>@ApiModel(description = &quot;åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°&quot;)</code></p>
<h3 id="ApiModelProperty"><a href="#ApiModelProperty" class="headerlink" title="@ApiModelProperty"></a><code>@ApiModelProperty</code></h3><p><code>@ApiModelProperty</code>æ˜¯<strong>æ”¾ç½®åœ¨è¯·æ±‚æˆ–å“åº”å®ä½“ç±»çš„å±æ€§ä¸Š</strong>çš„ï¼Œä¾‹å¦‚ä¿å­˜ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°çš„å¹´é¾„å±æ€§å¯ä»¥è¿™æ ·å†™ï¼š<code>    @ApiModelProperty(value = &quot;å¹´é¾„&quot;, required = true)</code></p>
<p>å…¶ä¸­çš„<code>required</code>å¯ä»¥æŒ‡å®šæ˜¯å¦ä¸ºå¿…ä¼ å­—æ®µï¼Œä¸º <code>true</code> æ—¶æ–‡æ¡£ä¸­ä¼šä¸ºè¯¥å±æ€§æ·»åŠ çº¢è‰²æ˜Ÿå·ï¼Œä¸º <code>true</code> æ—¶å¯ä»¥å¿½ç•¥ä¸å†™ï¼Œä¾‹å¦‚<code>@ApiModelProperty(&quot;å¹´é¾„&quot;)</code>ï¼Œ<strong>æ³¨æ„ï¼Œä»–å¹¶ä¸ä¼šå¸®ä½ è¿›è¡Œå‚æ•°æ ¡éªŒï¼</strong></p>
<h2 id="æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»"><a href="#æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»" class="headerlink" title="æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»"></a>æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»</h2><p>ä¸ºä»€ä¹ˆä¼šè¯´æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»ï¼Ÿæˆ‘é‡åˆ°å¾ˆå¤šçš„é¡¹ç›®ï¼Œç”¨åˆ°äº† Swaggerï¼Œä¸€äº›æ¥å£æœ‰ä»–çš„å½±å­ï¼Œä¸€äº›æ¥å£åˆæ²¡æœ‰ä»–ï¼Œå‰åç«¯å¯¹æ¥è¿˜æ˜¯è·Ÿä¹‹å‰ä¸€æ ·å£å¤´ä¼ è¾¾ã€‚æ‰€ä»¥ï¼Œä½ è¦å®ƒæœ‰ä½•ç”¨ï¼Ÿ</p>
<h1 id="è¯·æ±‚å‚æ•°æ ¡éªŒ"><a href="#è¯·æ±‚å‚æ•°æ ¡éªŒ" class="headerlink" title="è¯·æ±‚å‚æ•°æ ¡éªŒ"></a>è¯·æ±‚å‚æ•°æ ¡éªŒ</h1><p>ä½¿ç”¨<code>org.springframework.validation.annotation</code>åŒ…ä¸‹çš„<code>@Validated</code>å¯¹è¯·æ±‚å‚æ•°è¿›è¡Œåˆæ³•æ€§æ ¡éªŒã€‚</p>
<p>å› SpringBootç‰ˆæœ¬ä¸åŒï¼Œå¯èƒ½éœ€è¦æ·»åŠ ç›¸åº”çš„ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ–‡çš„ä¿å­˜ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°çš„å¹´é¾„å±æ€§ä¸ºä¾‹ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p>
<p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;/add&quot;)</span><br><span class="hljs-meta">@ApiOperation(value = &quot;ä¿å­˜ç”¨æˆ·ä¿¡æ¯&quot;)</span><br><span class="hljs-keyword">public</span> ApiResult&lt;?&gt; add(<span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Validated</span> UserAddReq req) &#123;<br>    userService.add(req);<br>    <span class="hljs-keyword">return</span> ApiResult.success();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¯·æ±‚å‚æ•°å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.validation.constraints.NotNull;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ApiModel(description = &quot;ä¿å­˜ç”¨æˆ·ä¿¡æ¯è¯·æ±‚å‚æ•°&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAddReq</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> -<span class="hljs-number">2749806305785349883L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¹´é¾„</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@NotNull(message = &quot;å¹´é¾„ä¸å…è®¸ä¸ºç©º&quot;)</span><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;å¹´é¾„&quot;, required = true)</span><br>    <span class="hljs-keyword">private</span> Integer age;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>é€šè¿‡<code>@NotNull</code>æ¥æŒ‡å®š<code>age</code>å­—æ®µä¸å…è®¸ä¸º<code>null</code>ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šçš„æ ¡éªŒæ³¨è§£å¯ä»¥ä½¿ç”¨ï¼Œå¯ä»¥<a href="https://javaee.github.io/javaee-spec/javadocs/javax/validation/constraints/package-summary.html">ç‚¹å‡»è·³è½¬æŸ¥é˜…æ›´å¤š</a></p>
<p>æ ¡éªŒä¸é€šè¿‡æ—¶ï¼Œç¨‹åºå°†ä¼šæŠ›å‡ºå¼‚å¸¸æ¥é˜»æ­¢ç»§ç»­è¿è¡Œï¼å°†åœ¨ä¸‹æ–‡ä¸­è¯´æ˜å¦‚ä½•ä¼˜é›…çš„å¤„ç†æ ¡éªŒä¸é€šè¿‡æ—¶çš„é”™è¯¯ã€‚</p>
<h1 id="å…¨å±€å¼‚å¸¸å¤„ç†"><a href="#å…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="å…¨å±€å¼‚å¸¸å¤„ç†"></a>å…¨å±€å¼‚å¸¸å¤„ç†</h1><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.sincland.insurance.partner.config;<br><br><span class="hljs-keyword">import</span> com.sincland.insurance.partner.exception.BusinessException;<br><span class="hljs-keyword">import</span> com.sincland.insurance.partner.pojo.other.ApiResult;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.ObjectUtils;<br><span class="hljs-keyword">import</span> org.slf4j.Logger;<br><span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<br><span class="hljs-keyword">import</span> org.springframework.http.converter.HttpMessageNotReadableException;<br><span class="hljs-keyword">import</span> org.springframework.validation.BindingResult;<br><span class="hljs-keyword">import</span> org.springframework.validation.FieldError;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.MethodArgumentNotValidException;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¼‚å¸¸å¤„ç†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RestControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionHandlerConfig</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(<span class="hljs-built_in">this</span>.getClass());<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†å…¶ä»–æ‰€æœ‰å¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = Exception.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; exceptionHandler(HttpServletRequest req, Exception e) &#123;<br>        String msg;<br>        <span class="hljs-keyword">if</span> (ObjectUtils.isNotEmpty(e.getCause())) &#123;<br>            msg = e.getCause().getMessage();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            msg = e.getMessage();<br>        &#125;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; å‘ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), msg);<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> ApiResult.exception(msg);<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¡éªŒå‚æ•°å¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req HttpServletRequest</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = MethodArgumentNotValidException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; handleMethodArgumentNotValidException(HttpServletRequest req, MethodArgumentNotValidException e) &#123;<br>        <span class="hljs-type">BindingResult</span> <span class="hljs-variable">bindingResult</span> <span class="hljs-operator">=</span> e.getBindingResult();<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">&quot;è¯·æ±‚å‚æ•°æ ¡éªŒä¸é€šè¿‡: &quot;</span>);<br>        <span class="hljs-keyword">for</span> (FieldError fieldError : bindingResult.getFieldErrors()) &#123;<br>            msg.append(fieldError.getField()).append(<span class="hljs-string">&quot;:&quot;</span>).append(fieldError.getDefaultMessage()).append(<span class="hljs-string">&quot;ï¼Œ&quot;</span>);<br>        &#125;<br>        msg.replace(msg.length() - <span class="hljs-number">1</span>, msg.length(), <span class="hljs-string">&quot;&quot;</span>);<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; &#123;&#125;&quot;</span>, req.getRequestURI(), msg);<br>        <span class="hljs-keyword">return</span> ApiResult.exception(msg.toString());<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = BusinessException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; businessExceptionHandler(HttpServletRequest req, BusinessException e) &#123;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; å‘ç”Ÿä¸šåŠ¡æ€§å¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), e.getMessage());<br>        <span class="hljs-keyword">return</span> e.getApiResultIsException() ? ApiResult.exception(e.getStatus(), e.getMessage())<br>                : ApiResult.fail(e.getStatus(), e.getMessage());<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = NullPointerException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; nullPointerExceptionHandler(HttpServletRequest req, NullPointerException e) &#123;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), e.getStackTrace()[<span class="hljs-number">0</span>]);<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> ApiResult.exception(<span class="hljs-string">&quot;å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸:&quot;</span> + e.getStackTrace()[<span class="hljs-number">0</span>]);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¯·æ±‚æ¶ˆæ¯æ— æ³•è§£æå¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = HttpMessageNotReadableException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; httpMessageNotReadableExceptionHandler(HttpServletRequest req, HttpMessageNotReadableException e) &#123;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; è¯·æ±‚æ¶ˆæ¯æ— æ³•è§£æå¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), e.getMessage());<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> ApiResult.fail(<span class="hljs-string">&quot;è¯·æ£€æŸ¥è¯·æ±‚ä½“æ ¼å¼&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¯ä»¥é€šè¿‡<code>@ExceptionHandler</code>æŒ‡å®šå„å¼å„æ ·çš„å¼‚å¸¸å¤„ç†ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰çš„å¼‚å¸¸ã€Java å†…ç½®çš„å¼‚å¸¸ã€æ ¡éªŒå‚æ•°å¼‚å¸¸<code>MethodArgumentNotValidException</code>ã€‚é€šè¿‡ä¸<code>ApiResult</code>è”åŠ¨ï¼Œè¾¾åˆ°å³ä½¿ç¨‹åºå¼‚å¸¸ï¼Œä¹Ÿä¼šæŒ‰ç…§æ­£å¸¸çš„æ•°æ®æ ¼å¼è¿›è¡Œå“åº”ã€‚</p>
<p>ä¹Ÿå¯ä»¥å®ç°åœ¨æœåŠ¡å±‚éœ€è¦è¿”å›ä¸€äº›ä¸šåŠ¡æ€§é”™è¯¯ï¼Œä½†ä½ çš„æ–¹æ³•è¿”å›å€¼å´ä¸æ˜¯<code>ApiResult</code>ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠ›å‡ºä¸€äº›è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå†åœ¨<code>ExceptionHandlerConfig</code>ä¸­è¿›è¡Œå¤„ç†ã€‚</p>
]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³ Spring é…ç½®æ–‡ä»¶è­¦å‘Š</title>
    <url>/2022/03/10/Spring/correlation/SolveYmalWarn/</url>
    <content><![CDATA[<p>Spring é¡¹ç›®é»˜è®¤æ˜¯ä½¿ç”¨<code>.properties</code>æ–‡ä»¶ä½œä¸ºé…ç½®æ–‡ä»¶çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹ æƒ¯ä¸Šä¼šæ›´å¤šçš„ä½¿ç”¨<code>.yml</code>æ–‡ä»¶ï¼Œå› ä¸ºå…¶å¯ä»¥ä½“ç°å‡ºé…ç½®é¡¹çš„æ ‘å½¢ç»“æ„ï¼Œå¯è¯»æ€§è¾ƒå¼ºã€‚</p>
<h1 id="é…ç½®æ–‡ä»¶ä¹±è±¡"><a href="#é…ç½®æ–‡ä»¶ä¹±è±¡" class="headerlink" title="é…ç½®æ–‡ä»¶ä¹±è±¡"></a>é…ç½®æ–‡ä»¶ä¹±è±¡</h1><p>ä¸€èˆ¬åœ¨é…ç½®æ•°æ®æºã€ç«¯å£å·ã€æœåŠ¡åç§°è¿™äº›é…ç½®æ—¶å¹¶ä¸ä¼šå‡ºç°é»„è‰²è­¦å‘Šï¼Œä½†æ˜¯ä¸€äº›è‡ªå®šä¹‰çš„é…ç½®é¡¹åˆ™ä¼šå‡ºç°<code>ä¸€ç‰‡é»„è‰²çš„éª‡äººæ™¯è±¡</code>ã€‚</p>
<p><img    class="lazyload" data-original="https://s2.loli.net/2022/04/26/HF7eK4CEIAsTL5y.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="   ><span class="image-caption">æ­£å¸¸çš„é¡¹ç›®é…ç½®</span></p>
<p><img    class="lazyload" data-original="https://s2.loli.net/2022/04/26/5Mxg2oscKYwlab8.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="   ><span class="image-caption">è‡ªå®šä¹‰çš„é…ç½®é¡¹</span></p>
<p>è™½ç„¶æœ‰è­¦å‘Šï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯è‡´å‘½é”™è¯¯ï¼Œå› ä¸ºä½ ä»ç„¶å¯ä»¥æ­£å¸¸çš„ä½¿ç”¨ <code>@Value(&quot;$&#123;test.a&#125;&quot;)</code> æ¥å–å€¼ï¼Œä½†æ˜¯ä½œä¸ºæœ‰ä»£ç æ´ç™–çš„äººï¼Œè¿™ä¸èƒ½å¿ï¼è€Œä¸” <code>@Value</code> è¿™ç§æ–¹å¼å¾ˆå®¹æ˜“å› å¤§æ„å¯¼è‡´åç§°ä¸ä¸€è‡´ï¼Œè¿›è€Œå¼•èµ·æ— æ³•å–å€¼ã€‚</p>
<h1 id="ä¸»è§’ç™»åœº"><a href="#ä¸»è§’ç™»åœº" class="headerlink" title="ä¸»è§’ç™»åœº"></a>ä¸»è§’ç™»åœº</h1><p>æˆ‘ä»¬å…ˆå»æ²¡æœ‰è­¦å‘Šçš„é…ç½®é¡¹ <code>spring.datasource.url</code> ä»£ç å†…éƒ¨ï¼Œçœ‹çœ‹æ˜¯æ€ä¹ˆå†™çš„ï¼Œèƒ½ä¸èƒ½æ‰¾ç‚¹è››ä¸é©¬è¿¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(</span><br><span class="hljs-meta">    prefix = &quot;spring.datasource&quot;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceProperties</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanClassLoaderAware</span>, InitializingBean &#123;<br>    <span class="hljs-keyword">private</span> ClassLoader classLoader;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">generateUniqueName</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DataSource</span>&gt; type;<br>    <span class="hljs-keyword">private</span> String driverClassName;<br>    <span class="hljs-keyword">private</span> String url;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> String jndiName;<br>    <span class="hljs-comment">//çœç•¥åéƒ¨ä»£ç ........</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>è‹±è¯­ç¨æ‡‚ä¸€äº›å°±ä¼šç«‹åˆ»æ³¨æ„åˆ° <code>@ConfigurationProperties</code> è¿™ä¸ªæ³¨è§£ï¼Œå› ä¸ºå®ƒä¸æˆ‘ä»¬æ­¤æ¬¡è¦è§£å†³çš„é—®é¢˜éå¸¸ç›¸è¿‘ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ <code>é…ç½®å±æ€§</code>ã€‚</p>
<h1 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h1><p>æ²¡é”™ï¼Œ<code>@ConfigurationProperties</code> æ³¨è§£å°±æ˜¯è§£å†³é…ç½®æ–‡ä»¶è­¦å‘Šçš„å…³é”®ï¼Œé‚£ä¹ˆä»–æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿ</p>
<h2 id="å…³ç³»æ˜ å°„å®ä½“ç±»"><a href="#å…³ç³»æ˜ å°„å®ä½“ç±»" class="headerlink" title="å…³ç³»æ˜ å°„å®ä½“ç±»"></a>å…³ç³»æ˜ å°„å®ä½“ç±»</h2><p>åƒä½¿ç”¨ <code>MyBatisPlus</code> é‚£æ ·ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª <code>å…³ç³»æ˜ å°„å®ä½“ç±»</code>ï¼Œç›®çš„æ˜¯å‘Šè¯‰ Springï¼ŒæœåŠ¡å¯åŠ¨æ—¶ä½ æŠŠå“ªäº›é…ç½®é¡¹çš„å€¼ç»™æˆ‘å¡åˆ°è¿™ä¸ªå®ä½“ç±»ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zyan.test.pojo.properties;<br><br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.NestedConfigurationProperty;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;test&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestProperties</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String aProperty;<br><br>    <span class="hljs-keyword">private</span> String b;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Boolean</span> <span class="hljs-variable">enable</span> <span class="hljs-operator">=</span> Boolean.FALSE;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„è¿™ä¸ªå®ä½“ç±»å¿…é¡»åŒ…å« <code>Setter</code> å’Œ <code>Getter</code> æ–¹æ³•ï¼Œå¦åˆ™ä½ å°†å–ä¸åˆ°å€¼å’Œæ— æ³•å–å€¼ã€‚å¹¶ä¸”è¿™ä¸ªç±»å¿…é¡»ä½¿ç”¨ <code>@Component</code> æ³¨è§£äº¤ç”± Spring ç®¡ç†ï¼Œæˆ–è€…åœ¨æœåŠ¡å¯åŠ¨ç±»ä¸Šä½¿ç”¨ <code>@ConfigurationPropertiesScan</code> æ³¨è§£è¿›è¡Œæ‰«æã€‚</p>
<p><code>@ConfigurationProperties</code> æ³¨è§£çš„ <code>prefix</code> ç”¨äºæŒ‡å®šé…ç½®é¡¹å‰ç¼€ï¼Œå¯ä»¥ä½¿ç”¨ <code>.</code> è¿›è¡Œå¤šçº§æŒ‡å®šã€‚ä¸èƒ½ä½¿ç”¨é©¼å³°å‘½åï¼Œåªèƒ½ä½¿ç”¨ <code>-</code> è¿›è¡Œåˆ†è¯ã€‚</p>
<p>å¯ä»¥ç›´æ¥åœ¨æ­¤ç±»ä¸­ä¸ºå±æ€§èµ‹ä¸Šé»˜è®¤å€¼ã€‚</p>
<h2 id="å–å€¼"><a href="#å–å€¼" class="headerlink" title="å–å€¼"></a>å–å€¼</h2><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestService</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TestProperties testProperties;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>         System.out.println(<span class="hljs-string">&quot;é…ç½®é¡¹ test.enable å–å€¼:&quot;</span> + testProperties.getEnable());<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<p>å°† <code>TestProperties</code> æ³¨å…¥åˆ°é€‚å½“çš„ä½ç½®ï¼Œé€šè¿‡ <code>Getter</code> æ–¹æ³•è¿›è¡Œå–å€¼ã€‚æ­¤å¤„ä½¿ç”¨ <code>@RequiredArgsConstructor</code> è¿›è¡Œæ„é€ å™¨æ³¨å…¥ï¼Œæƒ³è¦è¯¦ç»†äº†è§£ä½¿ç”¨æ–¹æ³•ï¼Œå¯é˜…è¯» <a href="/2020/10/30/Spring/base/RequiredArgsConstructor/">å¦‚ä½•ä¼˜é›…çš„è¿›è¡Œ Bean æ³¨å…¥</a>ã€‚</p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight yml"><table><tr><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">test:</span><br>  <span class="hljs-attr">a-property:</span> <span class="hljs-string">xxx</span><br>  <span class="hljs-attr">b:</span> <span class="hljs-string">xxx</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure>

<p>æŒ‰ç…§ä¹ æƒ¯ï¼Œå»ºè®®åœ¨ <code>.yml</code> æ–‡ä»¶ä¸­ä½¿ç”¨ <code>-</code> è¿›è¡Œåˆ†è¯ï¼Œåœ¨å®ä½“ç±»ä¸­ä½¿ç”¨é©¼å³°å‘½åï¼Œä¸è¦æ‹…å¿ƒè¿™æ ·æ— æ³•å–å€¼ï¼Œ<code>Spring</code> ä¼šå¸®ä½ è¿›è¡Œè½¬åŒ–ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸è¿™ä¹ˆåšã€‚</p>
<h1 id="è¿›é˜¶ç”¨æ³•"><a href="#è¿›é˜¶ç”¨æ³•" class="headerlink" title="è¿›é˜¶ç”¨æ³•"></a>è¿›é˜¶ç”¨æ³•</h1><h2 id="å¤šçº§é…ç½®"><a href="#å¤šçº§é…ç½®" class="headerlink" title="å¤šçº§é…ç½®"></a>å¤šçº§é…ç½®</h2><p>å¤šçº§é…ç½®åªéœ€è¦å¼•å…¥é™æ€å†…éƒ¨ç±»å³å¯</p>
<h3 id="æ˜ å°„ç±»å†™æ³•"><a href="#æ˜ å°„ç±»å†™æ³•" class="headerlink" title="æ˜ å°„ç±»å†™æ³•"></a>æ˜ å°„ç±»å†™æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;test&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestProperties</span> &#123;<br><br>    <span class="hljs-keyword">private</span> Other other;<br><br>    <span class="hljs-meta">@Data</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Other</span> &#123;<br>        <span class="hljs-keyword">private</span> String a;<br>        <span class="hljs-keyword">private</span> String b;<br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="yml-æ–‡ä»¶å†™æ³•"><a href="#yml-æ–‡ä»¶å†™æ³•" class="headerlink" title="yml æ–‡ä»¶å†™æ³•"></a>yml æ–‡ä»¶å†™æ³•</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">test:</span><br>  <span class="hljs-attr">other:</span><br>    <span class="hljs-attr">a:</span> <span class="hljs-string">xxx</span><br>    <span class="hljs-attr">b:</span> <span class="hljs-string">xxx</span><br></code></pre></td></tr></table></figure>

<h2 id="åˆ—è¡¨é…ç½®"><a href="#åˆ—è¡¨é…ç½®" class="headerlink" title="åˆ—è¡¨é…ç½®"></a>åˆ—è¡¨é…ç½®</h2><h3 id="æ˜ å°„ç±»å†™æ³•-1"><a href="#æ˜ å°„ç±»å†™æ³•-1" class="headerlink" title="æ˜ å°„ç±»å†™æ³•"></a>æ˜ å°„ç±»å†™æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;test&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestProperties</span> &#123;<br><br>    <span class="hljs-keyword">private</span> List&lt;Other&gt; otherList;<br><br>    <span class="hljs-meta">@Data</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Other</span> &#123;<br>        <span class="hljs-keyword">private</span> String a;<br>        <span class="hljs-keyword">private</span> String b;<br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="yml-æ–‡ä»¶å†™æ³•-1"><a href="#yml-æ–‡ä»¶å†™æ³•-1" class="headerlink" title="yml æ–‡ä»¶å†™æ³•"></a>yml æ–‡ä»¶å†™æ³•</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">test:</span><br>  <span class="hljs-attr">other-list:</span><br>    <span class="hljs-bullet">-</span><br>      <span class="hljs-attr">a:</span> <span class="hljs-string">xxx</span><br>      <span class="hljs-attr">b:</span> <span class="hljs-string">xxx</span><br>    <span class="hljs-bullet">-</span><br>      <span class="hljs-attr">a:</span> <span class="hljs-string">xxx</span><br>      <span class="hljs-attr">b:</span> <span class="hljs-string">xxx</span><br></code></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Spring ç›¸å…³</tag>
      </tags>
  </entry>
  <entry>
    <title>å­¦ä¼šä½¿ç”¨ BigDecimal</title>
    <url>/2020/07/15/Java/JavaBase/BigDecimal/</url>
    <content><![CDATA[<p><code>BigDecimal</code> æ˜¯ Java æä¾›çš„ä¸€ä¸ªå…³äºå°æ•°ç²¾ç¡®è®¡ç®—çš„ç±»ï¼Œå…¶ä½äº<code>java.math</code>åŒ…ä¸‹ã€‚</p>
<p>ä¸åŒäºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œ<code>BigDecimal</code>æ˜¯è°ƒç”¨ç›¸å…³æ–¹æ³•æ¥è¿›è¡Œè¿ç®—ã€‚å› ä¸ºå…¶æ‹¥æœ‰éå¸¸ç²¾ç¡®çš„å°æ•°è®¡ç®—èƒ½åŠ›ï¼Œæ‰€ä»¥æ¯”è¾ƒé€‚åˆç”¨äºè´¢åŠ¡ç›¸å…³çš„è®¡ç®—ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œå…¶è¿è¡Œæ•ˆç‡æ˜¯ä¸åŠ <code>Float</code> ä¸ <code>Double</code> çš„ï¼Œè¦æŒ‰ç…§å®é™…æƒ…å†µï¼Œè¿ç”¨åœ¨åˆç†çš„åœ°æ–¹ã€‚</p>
<span id="more"></span>

<h1 id="å¯¹è±¡åˆå§‹åŒ–"><a href="#å¯¹è±¡åˆå§‹åŒ–" class="headerlink" title="å¯¹è±¡åˆå§‹åŒ–"></a>å¯¹è±¡åˆå§‹åŒ–</h1><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>æˆ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä¸å»ºè®®ä½¿ç”¨</span><br><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-number">99.6</span>);<br></code></pre></td></tr></table></figure>

<p>å¼ºçƒˆå»ºè®®ä½¿ç”¨ String ç±»å‹è¿›è¡Œåˆå§‹åŒ–å¯¹è±¡ï¼Œå¼ºçƒˆä¸æ¨èä½¿ç”¨ Double ç±»å‹ã€‚åŸå› ä½•åœ¨ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå°æµ‹è¯•ã€‚</p>
<p>æ‰§è¡Œä¸‹æ–¹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java">BigDecimal bigDecimal=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">99</span>.<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure>

<p>è€Œæ‰§è¡Œä¸‹æ–¹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java">BigDecimal bigDecimal=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-number">99.6</span>);<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">99</span>.<span class="hljs-number">599999999999994315658113919198513031005859375</span><br></code></pre></td></tr></table></figure>

<p>é—®é¢˜ç«‹åˆ»æ˜¾ç°å‡ºæ¥ï¼Œä½¿ç”¨ Double å‹æ•°æ®åˆå§‹åŒ– Bigdecimal æ˜¯ä¸ç²¾ç¡®çš„ï¼Œä¼šæŸå¤±ç²¾åº¦ã€‚è¿™ä¸æ˜¯ BigDecimal çš„é—®é¢˜ï¼Œè€Œå±äº Double æœ¬èº«ã€‚åœ¨ IDEA ä¸­ï¼Œä½¿ç”¨ Double åˆå§‹åŒ–æ—¶ï¼Œåˆ™ä¼šâ€œæŠ¥é»„â€è­¦å‘Šã€‚<mark style="background-color:pink;">æ‰€ä»¥è¯·åŠ¡å¿…ä½¿ç”¨ String åˆå§‹åŒ– BigDecimal !</mark></p>
<p><img    class="lazyload" data-original="https://i.loli.net/2020/07/15/iGtUM7VnseTyJSc.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="   ><span class="image-caption">IDEA è­¦å‘Š</span></p>
<h1 id="å»ºè®®çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆ"><a href="#å»ºè®®çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å»ºè®®çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆ"></a>å»ºè®®çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆ</h1><p>åŸºäºä¸Šä¸€éƒ¨åˆ†å¾—åˆ°çš„ç»“è®ºï¼Œå»ºè®®åœ¨æ•°æ®åº“ä¸­ä½¿ç”¨<code> VARCHAR</code> ç±»å‹æˆ–è€… <code>DECIMAL</code>ï¼Œè¿™é‡Œä»¥ MySQL + MyBatis ä¸ºä¾‹ã€‚</p>
<table>
<thead>
<tr>
<th>æ•°æ®åº“æ•°æ®ç±»å‹</th>
<th>MyBatis å®ä½“ç±»æ•°æ®ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td>VARCHAR</td>
<td>String</td>
</tr>
<tr>
<td>DECIMAL</td>
<td>BigDecimal</td>
</tr>
</tbody></table>
<h1 id="åŠ å‡è¿ç®—"><a href="#åŠ å‡è¿ç®—" class="headerlink" title="åŠ å‡è¿ç®—"></a>åŠ å‡è¿ç®—</h1><blockquote>
<p>åŠ å‡è¿ç®—æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨ <code>add()</code> ä¸ <code>subtract()</code> æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p>
</blockquote>
<h2 id="å‡æ³•"><a href="#å‡æ³•" class="headerlink" title="å‡æ³•"></a>å‡æ³•</h2><p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">subtract</span> <span class="hljs-operator">=</span> bigDecimal.subtract(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;66.9&quot;</span>));<br>System.out.println(subtract.toString());<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">32</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">99</span>.<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure>

<p>æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<mark style="background-color:pink;">æ‰€æœ‰çš„è¿ç®—æ–¹æ³•åœ¨æ‰§è¡Œåå¹¶ä¸ä¼šå½±å“å‚ä¸è®¡ç®—çš„æ•°ï¼Œä»–åªä¼šå°†è®¡ç®—ç»“æœè¿”å›ï¼</mark></p>
<p>ä½ å¯ä»¥ä½¿ç”¨æ–°çš„å¯¹è±¡æ¥æ¥å—ï¼Œæˆ–è€…è¦†ç›–æ—§çš„å¯¹è±¡ã€‚</p>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br>bigDecimal = bigDecimal.subtract(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;66.9&quot;</span>));<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<h2 id="åŠ æ³•"><a href="#åŠ æ³•" class="headerlink" title="åŠ æ³•"></a>åŠ æ³•</h2><p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br>bigDecimal = bigDecimal.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;66.9&quot;</span>));<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">166</span>.<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure>


<h1 id="ä¹˜é™¤è¿ç®—"><a href="#ä¹˜é™¤è¿ç®—" class="headerlink" title="ä¹˜é™¤è¿ç®—"></a>ä¹˜é™¤è¿ç®—</h1><h2 id="ä¹˜æ³•"><a href="#ä¹˜æ³•" class="headerlink" title="ä¹˜æ³•"></a>ä¹˜æ³•</h2><p>ä½¿ç”¨ <code>multiply()</code>æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br>bigDecimal = bigDecimal.multiply(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;66.9&quot;</span>));<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">6663</span>.<span class="hljs-number">24</span><br></code></pre></td></tr></table></figure>

<h2 id="é™¤æ³•"><a href="#é™¤æ³•" class="headerlink" title="é™¤æ³•"></a>é™¤æ³•</h2><blockquote>
<p>é™¤æ³•æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ä¸ªè¿ç®—ï¼Œå› ä¸ºé™¤æ•°ä¸è¢«é™¤æ•°çš„å…³ç³»ï¼Œå¯èƒ½ä¼šé€ æˆç»“æœä¸º<code>æ— é™å¾ªç¯å°æ•°</code>æˆ–<code>æ— é™ä¸å¾ªç¯å°æ•°</code>ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ä½ éœ€è¦æŒ‡å®š<code>å°æ•°ä¿ç•™æ–¹æ¡ˆ</code>ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br>bigDecimal = bigDecimal.divide(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;3&quot;</span>));<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">33</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<p>å› ä¸ºè¯¥è¿ç®—ç»“æœä¸æ˜¯<code>æ— é™å¾ªç¯å°æ•°</code>ï¼Œæ‰€ä»¥ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆ Nice ï¼Œä½†æ˜¯å½“ä½ ç¨ç¨æ”¹åŠ¨ä¸€ä¸‹ï¼Œå®ƒå°±ä¼šâ€œåŸå½¢æ¯•éœ²â€ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br>bigDecimal = bigDecimal.divide(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;66.9&quot;</span>));<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<p style="color:red;">
    Exception in thread "main" java.lang.ArithmeticException: Non-terminating decimal expansion; no exact representable decimal result.
    at java.math.BigDecimal.divide(BigDecimal.java:1690)
    at ...
<p>

<p>æˆ‘æ˜¯è°ï¼Ÿæˆ‘åœ¨å“ªï¼Ÿæˆ‘å†™çš„æ˜¯ä»€ä¹ˆBUGï¼Ÿæˆ‘ä»¬æ¥çœ‹å…³é”®å­—<code>Non-terminating decimal expansion</code>ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯<code>æ— ç©·å°æ•°æ‰©å¼ </code>ã€‚çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯å¦å·²ç»æ˜ç™½é—®é¢˜æ‰€åœ¨ã€‚ä¹Ÿå°±æ˜¯ä¸Šè¾¹æ‰€æåˆ°çš„ï¼Œéœ€è¦æŒ‡å®š<code>å°æ•°ä¿ç•™æ–¹æ¡ˆ</code>ã€‚</p>
<p>æ”¹åŠ¨ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br>bigDecimal = bigDecimal.divide(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;66.9&quot;</span>),<span class="hljs-number">2</span>,BigDecimal.ROUND_DOWN);<br>System.out.println(bigDecimal.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>.<span class="hljs-number">48</span><br></code></pre></td></tr></table></figure>

<p>æ­¤æ—¶ä¸€åˆ‡éƒ½å·²æ¢å¤å¾€æ—¥çš„å¹³é™ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ä»€ä¹ˆåŠ›é‡éåˆ¶ä½äº†å¯æ¶çš„ Exception å‘¢ï¼Ÿç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°åœ¨ <code>divide()</code>æ–¹æ³•ä¸­å¤šäº†ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>2</code>ï¼Œä¸€ä¸ªæ˜¯<code>BigDecimal.ROUND_DOWN</code>ã€‚å…¶ä¸­ï¼Œ2æ˜¯ä¿ç•™å°æ•°çš„ä½æ•°ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ã€‚è€Œ<code>BigDecimal.ROUND_DOWN</code>åˆæ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿä»–æ˜¯ BigDecimal ç±»ä¸­çš„å°æ•°ä¿ç•™æ–¹æ¡ˆå¸¸é‡ï¼Œç®—ä¸Šè¿™ä¸€ä¸ªï¼Œä¸€å…±æœ‰å…«ä¸ªæ–¹æ¡ˆå¸¸é‡ï¼Œè¯·çœ‹è§£æã€‚</p>
<table>
<thead>
<tr>
<th align="left">å¸¸é‡</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">BigDecimal.ROUND_UP</td>
<td align="left">èˆå…¥è¿œç¦»é›¶çš„èˆå…¥æ¨¡å¼ã€‚åœ¨ä¸¢å¼ƒéé›¶éƒ¨åˆ†ä¹‹å‰å§‹ç»ˆå¢åŠ æ•°å­—(å§‹ç»ˆå¯¹éé›¶èˆå¼ƒéƒ¨åˆ†å‰é¢çš„æ•°å­—åŠ 1)ã€‚</td>
</tr>
<tr>
<td align="left">BigDecimal.ROUND_DOWN</td>
<td align="left">æ¥è¿‘é›¶çš„èˆå…¥æ¨¡å¼ã€‚åœ¨ä¸¢å¼ƒæŸéƒ¨åˆ†ä¹‹å‰å§‹ç»ˆä¸å¢åŠ æ•°å­—(ä»ä¸å¯¹èˆå¼ƒéƒ¨åˆ†å‰é¢çš„æ•°å­—åŠ 1ï¼Œå³æˆªçŸ­)ã€‚</td>
</tr>
<tr>
<td align="left">BigDecimal.ROUND_CEILING</td>
<td align="left">æ¥è¿‘æ­£æ— ç©·å¤§çš„èˆå…¥æ¨¡å¼ã€‚å¦‚æœ BigDecimal ä¸ºæ­£ï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_UP ç›¸åŒï¼›å¦‚æœä¸ºè´Ÿï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_DOWN ç›¸åŒã€‚</td>
</tr>
<tr>
<td align="left">BigDecimal.ROUND_FLOOR</td>
<td align="left">æ¥è¿‘è´Ÿæ— ç©·å¤§çš„èˆå…¥æ¨¡å¼ã€‚å¦‚æœ BigDecimal ä¸ºæ­£ï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_DOWN ç›¸åŒï¼›å¦‚æœä¸ºè´Ÿï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_UP ç›¸åŒã€‚</td>
</tr>
<tr>
<td align="left">BigDecimal.ROUND_HALF_UP</td>
<td align="left">å‘â€œæœ€æ¥è¿‘çš„â€æ•°å­—èˆå…¥ï¼Œå¦‚æœä¸ä¸¤ä¸ªç›¸é‚»æ•°å­—çš„è·ç¦»ç›¸ç­‰ï¼Œåˆ™ä¸ºå‘ä¸Šèˆå…¥çš„èˆå…¥æ¨¡å¼ã€‚å¦‚æœèˆå¼ƒéƒ¨åˆ† &gt;&#x3D; 0.5ï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_UP ç›¸åŒ;å¦åˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_DOWN ç›¸åŒã€‚æ³¨æ„ï¼Œè¿™æ˜¯æˆ‘ä»¬å¤§å¤šæ•°äººåœ¨å°å­¦æ—¶å°±å­¦è¿‡çš„èˆå…¥æ¨¡å¼(å››èˆäº”å…¥)ã€‚</td>
</tr>
<tr>
<td align="left">BigDecimal.ROUND_HALF_DOWN</td>
<td align="left">å‘â€œæœ€æ¥è¿‘çš„â€æ•°å­—èˆå…¥ï¼Œå¦‚æœä¸ä¸¤ä¸ªç›¸é‚»æ•°å­—çš„è·ç¦»ç›¸ç­‰ï¼Œåˆ™ä¸ºä¸Šèˆå…¥çš„èˆå…¥æ¨¡å¼ã€‚å¦‚æœèˆå¼ƒéƒ¨åˆ† &gt; 0.5ï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_UP ç›¸åŒ;å¦åˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_DOWN ç›¸åŒ(äº”èˆå…­å…¥)ã€‚</td>
</tr>
<tr>
<td align="left">BigDecimal.ROUND_HALF_EVE</td>
<td align="left">å‘â€œæœ€æ¥è¿‘çš„â€æ•°å­—èˆå…¥ï¼Œå¦‚æœä¸ä¸¤ä¸ªç›¸é‚»æ•°å­—çš„è·ç¦»ç›¸ç­‰ï¼Œåˆ™å‘ç›¸é‚»çš„å¶æ•°èˆå…¥ã€‚å¦‚æœèˆå¼ƒéƒ¨åˆ†å·¦è¾¹çš„æ•°å­—ä¸ºå¥‡æ•°ï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_HALF_UP ç›¸åŒï¼›å¦‚æœä¸ºå¶æ•°ï¼Œåˆ™èˆå…¥è¡Œä¸ºä¸ ROUND_HALF_DOWN ç›¸åŒã€‚æ­¤èˆå…¥æ¨¡å¼ä¹Ÿç§°ä¸ºâ€œé“¶è¡Œå®¶èˆå…¥æ³•â€ï¼Œä¸»è¦åœ¨ç¾å›½ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td align="left">BigDecimal.ROUND_UNNECESSARY</td>
<td align="left">æ–­è¨€è¯·æ±‚çš„æ“ä½œå…·æœ‰ç²¾ç¡®çš„ç»“æœï¼Œå› æ­¤ä¸éœ€è¦èˆå…¥ã€‚å¦‚æœå¯¹è·å¾—ç²¾ç¡®ç»“æœçš„æ“ä½œæŒ‡å®šæ­¤èˆå…¥æ¨¡å¼ï¼Œåˆ™æŠ›å‡ºArithmeticExceptionã€‚</td>
</tr>
</tbody></table>
<p>è¿™ä¹ˆå¤šçš„å°æ•°ä¿ç•™æ–¹æ¡ˆï¼Œå…¶å®å¸¸ç”¨çš„ä¹Ÿä¸å¤šï¼Œæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªå·±å†™ä¸ªæµ‹è¯•ç±»ç©ç©ã€‚</p>
<h1 id="æ¯”è¾ƒå¤§å°"><a href="#æ¯”è¾ƒå¤§å°" class="headerlink" title="æ¯”è¾ƒå¤§å°"></a>æ¯”è¾ƒå¤§å°</h1><blockquote>
<p>æ¯”è¾ƒå¤§å°ä¹Ÿæ˜¯éœ€è¦è°ƒç”¨æ–¹æ³•çš„ï¼Œä½¿ç”¨<code>compareTo()</code>æ–¹æ³•å³å¯å¤„ç†ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.6&quot;</span>);<br><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;66.9&quot;</span>);<br><span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> a.compareTo(b);<br>System.out.println(i);<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight"><table><tr><td class="code"><pre><code class="hljs">1<br></code></pre></td></tr></table></figure>

<p><code>compareTo()</code>æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª<code>int</code>å‹çš„æ•°æ®ï¼Œä»¥ä¸Šæ–¹ç¤ºä¾‹ä¸ºä¾‹ï¼Œè¯·çœ‹è§£æ</p>
<table>
<thead>
<tr>
<th align="left">æƒ…å†µ</th>
<th align="left">compareTo() çš„è¿”å›å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">a&gt;b</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">a&#x3D;b</td>
<td align="left">0</td>
</tr>
<tr>
<td align="left">a&lt;b</td>
<td align="left">-1</td>
</tr>
</tbody></table>
<p>å½“ä½ è¦åˆ¤æ–­ä¸€ä¸ªæ•°çš„ä¸0çš„å…³ç³»ï¼ˆæ­£è´Ÿï¼‰æ—¶å¯ä»¥è¿™æ ·å†™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;-99.6&quot;</span>);<br><span class="hljs-keyword">if</span> (a.compareTo(BigDecimal.ZERO) &gt; <span class="hljs-number">0</span>) &#123;<br>	<span class="hljs-comment">//aæ˜¯æ­£æ•°</span><br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a.compareTo(BigDecimal.ZERO) == <span class="hljs-number">0</span>)&#123;<br>	<span class="hljs-comment">//a==0</span><br>&#125;<span class="hljs-keyword">else</span> &#123;<br>	<span class="hljs-comment">//aæ˜¯è´Ÿæ•°</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="å»é™¤æ— ç”¨çš„é›¶"><a href="#å»é™¤æ— ç”¨çš„é›¶" class="headerlink" title="å»é™¤æ— ç”¨çš„é›¶"></a>å»é™¤æ— ç”¨çš„é›¶</h2><p>ç¤ºä¾‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;99.12300000&quot;</span>);<br><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> a.stripTrailingZeros();<br>System.out.println(b.toString());<br></code></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">99</span>.<span class="hljs-number">123</span><br></code></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>å°†Listè½¬æ¢ä¸ºæ ‘å½¢ç»“æ„</title>
    <url>/2022/08/19/Java/JavaBase/ConvertListToTree/</url>
    <content><![CDATA[<p>åœ¨ Java ä¸­ï¼ŒæŠŠ<code>List</code> è½¬æ¢ä¸ºå¤šçº§çš„æ ‘å½¢ç»“æ„éå¸¸å¸¸è§ã€‚ä¾‹å¦‚èœå•æ•°æ®æ˜¯åœ¨æ•°æ®åº“ä¸­â€œå¹³é“ºâ€å­˜å‚¨çš„ï¼Œåœ¨åšæŸ¥è¯¢æ—¶ï¼Œéœ€è¦å°†å…¶è½¬æ¢ä¸ºæ ‘å½¢ç»“æ„ï¼Œæ–¹ä¾¿å‰ç«¯è¿›è¡Œå±•ç¤ºã€‚</p>
<p>æœ¬æ–‡å°±ä»¥èœå•ä½œä¸ºæ¡ˆä¾‹ï¼Œè¯»è€…å¯ä»¥ä¸¾ä¸€åä¸‰ï¼Œå®ç°è‡ªå·±çš„éœ€æ±‚</p>
<h1 id="æ•°æ®åº“è®¾è®¡"><a href="#æ•°æ®åº“è®¾è®¡" class="headerlink" title="æ•°æ®åº“è®¾è®¡"></a>æ•°æ®åº“è®¾è®¡</h1><p>å°†å…¶å‘½åä¸º<code>PERMISSIONS</code></p>
<table>
<thead>
<tr>
<th align="left">å­—æ®µå</th>
<th align="left">ç±»å‹</th>
<th align="left">æ³¨é‡Š</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CODE</td>
<td align="left">varchar</td>
<td align="left">ç¼–ç (ä¸»é”®)</td>
</tr>
<tr>
<td align="left">PARENT_CODE</td>
<td align="left">varchar</td>
<td align="left">çˆ¶ç¼–ç </td>
</tr>
<tr>
<td align="left">NAME</td>
<td align="left">varchar</td>
<td align="left">åç§°</td>
</tr>
<tr>
<td align="left">TYPE</td>
<td align="left">tinyint</td>
<td align="left">ç±»å‹ 0èœå• 1æŒ‰é’® 2æ¥å£</td>
</tr>
<tr>
<td align="left">URL</td>
<td align="left">varchar</td>
<td align="left">å‰ç«¯è·¯ç”±æˆ–åç«¯æ¥å£è·¯ç”±</td>
</tr>
<tr>
<td align="left">CREATE_TIME</td>
<td align="left">datetime</td>
<td align="left">åˆ›å»ºæ—¶é—´</td>
</tr>
<tr>
<td align="left">UPDATE_TIME</td>
<td align="left">datetime</td>
<td align="left">æ›´æ–°æ—¶é—´</td>
</tr>
</tbody></table>
<h1 id="Java-å¤„ç†"><a href="#Java-å¤„ç†" class="headerlink" title="Java å¤„ç†"></a>Java å¤„ç†</h1><p>å‡è®¾æˆ‘ä»¬æ­¤æ—¶å·²ç»æŸ¥è¯¢å‡ºä¸€ä¸ªåˆ—è¡¨<code>List&lt;Permissions&gt;</code>ï¼Œ<code>Permissions</code>ç±»æ˜¯ä¸æ•°æ®åº“å¯¹åº”çš„å®ä½“ç±»ï¼ŒåŒ…å«äº†<code>PERMISSIONS</code>è¡¨çš„æ‰€æœ‰å­—æ®µï¼Œæ­¤åˆ»å°±éœ€è¦å¯¹å…¶è¿›è¡Œæ ‘å½¢ç»“æ„å¤„ç†ã€‚</p>
<h2 id="æ ‘å½¢ç»“æ„å®ä½“ç±»"><a href="#æ ‘å½¢ç»“æ„å®ä½“ç±»" class="headerlink" title="æ ‘å½¢ç»“æ„å®ä½“ç±»"></a>æ ‘å½¢ç»“æ„å®ä½“ç±»</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŒ…å«è‡ªèº«çš„æ ‘å½¢ç»“æ„å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æƒé™æ ‘å†…å®¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span><br><span class="hljs-meta">@ApiModel(description = &quot;æƒé™æ ‘å†…å®¹&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionsTreeRes</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Permissions</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">3107598961006613967L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æƒé™æ ‘</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ApiModelProperty(&quot;æƒé™æ ‘&quot;)</span><br>    <span class="hljs-keyword">private</span> List&lt;PermissionsTreeRes&gt; children;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PermissionsTreeRes</code>ç»§æ‰¿äº†<code>Permissions</code>ï¼Œå³æ‹¥æœ‰äº†æ•°æ®åº“è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µã€‚å…¶è‡ªèº«åˆåŒ…å«äº†ç±»å‹ä¸º<code>List&lt;PermissionsTreeRes&gt;</code>çš„<code>children</code>å±æ€§ï¼Œå³å­èŠ‚ç‚¹ã€‚</p>
<h2 id="ä»£ç å¤„ç†"><a href="#ä»£ç å¤„ç†" class="headerlink" title="ä»£ç å¤„ç†"></a>ä»£ç å¤„ç†</h2><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> List&lt;PermissionsTreeRes&gt; <span class="hljs-title function_">buildPermissionsTree</span><span class="hljs-params">(List&lt;Permissions&gt; permissionsList)</span> &#123;<br>    <span class="hljs-keyword">return</span> permissionsList.stream().filter(permissions -&gt; ObjectUtils.isEmpty(permissions.getParentCod()))<br>            .map(permissions -&gt; &#123;<br>                <span class="hljs-type">PermissionsTreeRes</span> <span class="hljs-variable">treeRes</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PermissionsTreeRes</span>();<br>                BeanUtils.copyProperties(permissions, treeRes);<br>                treeRes.setChildren(<span class="hljs-built_in">this</span>.getPermissionsChildrenList(permissions.getCode(),permissionsList));<br>                <span class="hljs-keyword">return</span> treeRes;<br>            &#125;).collect(Collectors.toList());<br>&#125;<br><br><span class="hljs-keyword">private</span> List&lt;PermissionsTreeRes&gt; <span class="hljs-title function_">getPermissionsChildrenList</span><span class="hljs-params">(String code, List&lt;Permissions&gt;permissionsList)</span> &#123;<br>    <span class="hljs-keyword">return</span> permissionsList.stream().filter(permissions -&gt; StringUtils.equals(permissions.getParentCode(),code))<br>            .map(permissions -&gt; &#123;<br>                <span class="hljs-type">PermissionsTreeRes</span> <span class="hljs-variable">treeRes</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PermissionsTreeRes</span>();<br>                BeanUtils.copyProperties(permissions, treeRes);<br>                treeRes.setChildren(<span class="hljs-built_in">this</span>.getPermissionsChildrenList(permissions.getCode(),permissionsList));<br>                <span class="hljs-keyword">return</span> treeRes;<br>            &#125;).collect(Collectors.toList());<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><p><code>buildPermissionsTree()</code>æ–¹æ³•å†…ä½¿ç”¨<code>ObjectUtils.isEmpty(permissions.getParentCod())</code>æ¡ä»¶ç­›é€‰å‡ºæ‰€æœ‰çˆ¶ç¼–ç ä¸ºç©ºçš„æ•°æ®ï¼Œå³ä¸€çº§èœå•æ•°æ®ã€‚éå†ä¸­çš„<code>setChildren()</code>è°ƒç”¨äº†<code>getPermissionsChildrenList()</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥è‡ªèº«çš„<code>CODE</code>ï¼Œå»å¯»æ‰¾è‡ªå·±çš„å­èŠ‚ç‚¹ã€‚</p>
</li>
<li><p><code>getPermissionsChildrenList()</code>æ–¹æ³•å†…ä½¿ç”¨é€’å½’ä¸æ–­çš„å‘ä¸‹æŸ¥æ‰¾ï¼Œç›´è‡³<code>filter</code>åå†æ— æ•°æ®ï¼Œä¾¿åœæ­¢é€’å½’ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡éå†ã€‚</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>Java å‡½æ•°å¼ç¼–ç¨‹</title>
    <url>/2022/03/04/Java/JavaBase/FunctionalProgramming/</url>
    <content><![CDATA[<p>ä» Java 8 å¼€å§‹ï¼Œä¾¿æ‹¥æœ‰äº†å‡½æ•°å¼ç¼–ç¨‹çš„èƒ½åŠ›ã€‚è¿™ä¸ªèƒ½åŠ›é€šä¿—æ¥è®²ï¼Œå°±æ˜¯å¯ä»¥æŠŠä¸€ä¸ªæ–¹æ³•å®ç°ï¼ˆä¹Ÿå¯ç®€å•çš„ç†è§£ä¸ºä»£ç ç‰‡æ®µï¼‰ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™æ‰§è¡Œã€‚</p>
<p>Java æœ‰å†…ç½®çš„ä¸€äº›ç±»æˆ–å·¥å…·å°±ä½¿ç”¨åˆ°è¿™ä¸ªç‰¹æ€§ï¼Œä¾‹å¦‚æ•´ç†é›†åˆæ—¶æ‰€ä½¿ç”¨çš„<code>stream()</code></p>
<p>å…¶å®åœ¨çœŸå®çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œä½¿ç”¨è¿™ä¸ªç‰¹æ€§çš„äººå¹¶ä¸å¤šã€‚ç„¶è€Œåœ¨ä¸€æ¬¡å¶ç„¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè®©æˆ‘æ·±åˆ»ç†è§£åˆ°è¿™ä¸ªç‰¹æ€§çš„é‡è¦ç¨‹åº¦ï¼Œä»¥åŠå®ƒèƒ½ä¸ºä»£ç ç»“æ„å¸¦æ¥å¤šå¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚</p>
<h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ</h1><h2 id="æŠ›å‡ºé—®é¢˜"><a href="#æŠ›å‡ºé—®é¢˜" class="headerlink" title="æŠ›å‡ºé—®é¢˜"></a>æŠ›å‡ºé—®é¢˜</h2><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä»£ç åœºæ™¯ï¼Œç°åœ¨æœ‰ä¸€ä¸ª<code>Procedure</code>ç±»ï¼Œå¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Procedure</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title function_">test1</span><span class="hljs-params">(Integer t)</span> &#123;<br>        <span class="hljs-keyword">return</span> t + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title function_">test2</span><span class="hljs-params">(Integer t)</span> &#123;<br>        <span class="hljs-keyword">return</span> t + <span class="hljs-number">2</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title function_">test3</span><span class="hljs-params">(Integer t)</span> &#123;<br>        <span class="hljs-keyword">return</span> t + <span class="hljs-number">3</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ä¸ª<code>Share</code>ç±»ï¼Œå¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Share</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">a</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Procedure.test1(i);<br>            System.out.println(<span class="hljs-string">&quot;ä»£ç ç¬¬&quot;</span> + i + <span class="hljs-string">&quot;æ¬¡æ‰§è¡Œç»“æœ:&quot;</span> + value);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">b</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Procedure.test2(i);<br>            System.out.println(<span class="hljs-string">&quot;ä»£ç ç¬¬&quot;</span> + i + <span class="hljs-string">&quot;æ¬¡æ‰§è¡Œç»“æœ:&quot;</span> + value);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">c</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Procedure.test3(i);<br>            System.out.println(<span class="hljs-string">&quot;ä»£ç ç¬¬&quot;</span> + i + <span class="hljs-string">&quot;æ¬¡æ‰§è¡Œç»“æœ:&quot;</span> + value);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æƒ³æƒ³æ€ä¹ˆä¼˜åŒ–<code>Share</code>ç±»é‡Œçš„<code>a() b() c()</code>æ–¹æ³•ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œä¼˜åŒ–ä¸å…è®¸å˜æ›´<code>a() b() c()</code>æ–¹æ³•çš„åŠŸèƒ½ã€‚</p>
<h2 id="ä¸€èˆ¬ä¼˜åŒ–"><a href="#ä¸€èˆ¬ä¼˜åŒ–" class="headerlink" title="ä¸€èˆ¬ä¼˜åŒ–"></a>ä¸€èˆ¬ä¼˜åŒ–</h2><figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Share</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">a</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Procedure.test1(i);<br>            println(i, value);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">b</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Procedure.test2(i);<br>            println(i, value);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">c</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Procedure.test3(i);<br>            println(i, value);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">println</span><span class="hljs-params">(Integer index, Integer value)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä»£ç ç¬¬&quot;</span> + index + <span class="hljs-string">&quot;æ¬¡æ‰§è¡Œç»“æœ:&quot;</span> + value);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä»¿ä½›æœ€å¤§çš„ä¼˜åŒ–ï¼Œä¹Ÿåªèƒ½æŠŠæ‰“å°ç»“æœçš„é‚£ä¸€è¡Œä»£ç æŠ½å‡ºï¼Œä½œä¸ºå…¬å…±çš„æ–¹æ³•ä½¿ç”¨ã€‚</p>
<h2 id="å‡½æ•°å¼æ˜¯æœ€ä¼˜è§£"><a href="#å‡½æ•°å¼æ˜¯æœ€ä¼˜è§£" class="headerlink" title="å‡½æ•°å¼æ˜¯æœ€ä¼˜è§£"></a>å‡½æ•°å¼æ˜¯æœ€ä¼˜è§£</h2><p>é€šè¿‡åˆ†æå¯ä»¥çœ‹å‡ºï¼Œä¸‰ä¸ªæ–¹æ³•é‡Œçš„<code>for</code>å¾ªç¯æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå”¯ä¸€çš„ä¸åŒç‚¹å°±æ˜¯è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æœ‰è‡ªå·±çš„è°ƒç”¨é€»è¾‘ï¼š<code>a()</code>è°ƒç”¨<code>Procedure.test1(Integer)</code>ï¼Œ<code>b()</code>è°ƒç”¨<code>Procedure.test2(Integer)</code>ï¼Œ<code>c()</code>è°ƒç”¨<code>Procedure.test3(Integer)</code>ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªè°ƒç”¨é€»è¾‘ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å®ç°å†…å®¹è¿›è¡Œä¼ é€’ï¼Œäº¤ç»™<code>println()</code>æ–¹æ³•ï¼Œè®©å…¶åœ¨é€‚å½“çš„åœ°æ–¹è°ƒç”¨ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œå‡½æ•°å¼ç¼–ç¨‹å°±åƒé­”æ³•ä¸€æ ·ï¼ŒæŠŠè¿™ä¸ªç±»çš„ä»£ç ç»“æ„ä¼˜åŒ–åˆ°æ·‹æ¼“å°½è‡´ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Share</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">a</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//ç®€å†™</span><br>        println(Procedure::test1);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">b</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//ç®€å†™</span><br>        println(Procedure::test2);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">c</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//ä¸ºäº†è®²è§£ï¼Œæ­¤å¤„ä½¿ç”¨å®Œæ•´å†™æ³•</span><br>        println((t)-&gt;&#123;<br>            <span class="hljs-keyword">return</span> Procedure.test3(t);<br>        &#125;);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">println</span><span class="hljs-params">(Function&lt;Integer, Integer&gt; func)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> func.apply(i);<br>            System.out.println(<span class="hljs-string">&quot;ä»£ç ç¬¬&quot;</span> + i + <span class="hljs-string">&quot;æ¬¡æ‰§è¡Œç»“æœ:&quot;</span> + value);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        a();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="Java-å†…ç½®çš„å‡½æ•°å¼æ¥å£"><a href="#Java-å†…ç½®çš„å‡½æ•°å¼æ¥å£" class="headerlink" title="Java å†…ç½®çš„å‡½æ•°å¼æ¥å£"></a>Java å†…ç½®çš„å‡½æ•°å¼æ¥å£</h1><p>Java æ˜¯ä¸€ç§å¼ºç±»å‹è¯­è¨€ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å¼ç¼–ç¨‹è¿™ä¸€ç‰¹æ€§ä¹Ÿä¸ä¾‹å¤–ï¼Œå®ƒä¸èƒ½åƒ JS é‚£æ ·å¯ä»¥å°†ä»»ä½•å½¢å¼ï¼ˆè¿™é‡ŒæŒ‡å‚æ•°ã€è¿”å›å€¼ï¼‰çš„å‡½æ•°è¿›è¡Œä¼ é€’ï¼Œè€Œæ˜¯å¿…é¡»åœ¨å‡½æ•°æ¥å—æ–¹æ˜¾å¼çš„è§„å®šè¯¥å‡½æ•°çš„æ•°æ®ç±»å‹ç­‰ç»†èŠ‚ã€‚</p>
<p>Java åˆ©ç”¨æ³›å‹å†…ç½®äº†ä¸€äº›å¯ä»¥çµæ´»ä½¿ç”¨çš„å‡½æ•°å¼æ¥å£ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šè¿™äº›æ¥å£çš„æ³›å‹è¾¾åˆ°å®šåˆ¶åŒ–çš„ç›®çš„ï¼Œæ¥æ»¡è¶³ä¸€èˆ¬çš„å¼€å‘éœ€æ±‚ã€‚</p>
<h2 id="æ¥å£åç§°å…³é”®å­—æ•´ç†"><a href="#æ¥å£åç§°å…³é”®å­—æ•´ç†" class="headerlink" title="æ¥å£åç§°å…³é”®å­—æ•´ç†"></a>æ¥å£åç§°å…³é”®å­—æ•´ç†</h2><p>ç”±äºå†…ç½®çš„å‡½æ•°å¼æ¥å£è¾ƒå¤šï¼Œè¿™é‡Œå°±ä¸å†ä¸€ä¸€åˆ—ä¸¾ï¼Œå¯ä»¥<a href="https://www.runoob.com/java/java8-functional-interfaces.html">ç‚¹å‡»è®¿é—®èœé¸Ÿæ•™ç¨‹ç½‘ç«™</a>è¿›è¡ŒæŸ¥é˜…</p>
<p>ä¸è¿‡æˆ‘å‘ç°è¿™äº›æ¥å£çš„åç§°å’Œä»–ä»¬çš„åœºæ™¯ç”¨é€”å­˜åœ¨ä¸€å®šçš„è§„å¾‹ï¼Œç‰¹åœ°æ•´ç†ä¸€ä»½å…³é”®å­—çš„å¯¹ç…§è¡¨ã€‚</p>
<table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>è¿”å›å€¼</th>
<th>å‚æ•°</th>
<th>æ‰§è¡Œ</th>
</tr>
</thead>
<tbody><tr>
<td>Consumer</td>
<td>æ— è¿”å›ç»“æœ</td>
<td>æœ‰å‚æ•°</td>
<td>acceptæ–¹æ³•</td>
</tr>
<tr>
<td>Supplier</td>
<td>æœ‰è¿”å›ç»“æœ</td>
<td>æ— å‚æ•°</td>
<td>getæ–¹æ³•</td>
</tr>
<tr>
<td>Function</td>
<td>æœ‰è¿”å›ç»“æœ</td>
<td>æœ‰å‚æ•°</td>
<td>applyæ–¹æ³•</td>
</tr>
<tr>
<td>Predicate</td>
<td>æœ‰è¿”å›ç»“æœï¼Œä¸”ç»“æœä¸ºå¸ƒå°”å€¼</td>
<td>æœ‰å‚æ•°</td>
<td>testæ–¹æ³•</td>
</tr>
<tr>
<td>Operator</td>
<td>æœ‰è¿”å›ç»“æœï¼Œä¸”å‚æ•°å’Œè¿”å›ç»“æœæ•°æ®ç±»å‹ç›¸åŒ</td>
<td>æœ‰å‚æ•°ï¼Œä¸”å‚æ•°å’Œè¿”å›ç»“æœæ•°æ®ç±»å‹ç›¸åŒ</td>
<td>applyæ–¹æ³•</td>
</tr>
</tbody></table>
<h1 id="å¦‚ä½•è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£"><a href="#å¦‚ä½•è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£" class="headerlink" title="å¦‚ä½•è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£"></a>å¦‚ä½•è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£</h1><p>å½“ Java å†…ç½®çš„å‡½æ•°å¼æ¥å£ä¸èƒ½æ»¡è¶³å¼€å‘éœ€æ±‚æ—¶ï¼ˆä¾‹å¦‚æ¥å£çš„å‚æ•°æ•°é‡å¾ˆå¤šï¼‰ï¼Œä½ å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªå‡½æ•°å¼æ¥å£æ¥ä½¿ç”¨ã€‚</p>
<p>å½“ç„¶ï¼Œå‡ºäºä¸ªäººå–œå¥½ã€é¡¹ç›®ç®¡ç†ç­‰åŸå› ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­å®Œå…¨ä½¿ç”¨è‡ªå®šä¹‰çš„å‡½æ•°å¼æ¥å£ï¼Œæ”¾å¼ƒæ‰€æœ‰çš„å†…ç½®å‡½æ•°å¼æ¥å£ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å‡½æ•°å¼æ¥å£ï¼Œçœ‹èµ·æ¥ä¸æ™®é€šçš„æ¥å£å®šä¹‰æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.zyan.test;<br><br><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TestInterFace</span> &#123;<br><br>    Integer <span class="hljs-title function_">test</span><span class="hljs-params">(String a, String b, String c, String d)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç»è¿‡å®è·µï¼Œ<code>@FunctionalInterface</code>æ³¨è§£å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå‡ºäºä¹ æƒ¯çš„åŸå› ï¼Œæˆ‘éƒ½ä¼šåŠ ä¸Šè¯¥æ³¨è§£ã€‚</p>
<p><strong>è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£éœ€è¦æ»¡è¶³ï¼šæœ‰ä¸”åªæœ‰ä¸€ä¸ªæœªå®ç°çš„æ–¹æ³•ã€‚</strong></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java åŸºç¡€</tag>
      </tags>
  </entry>
</search>
