

<!DOCTYPE html>
<html lang="zh-CN" color-mode=light>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ç›¸å¯¹è§„èŒƒçš„æœåŠ¡APIåº”å¦‚ä½•å®ç° - zyan</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  
  <meta name="description" content="
æ ‡å‡†è§„èŒƒçš„æ¥å£å¯ä»¥é™ä½å‰åç«¯å¼€å‘äººå‘˜ä¹‹é—´çš„æ²Ÿé€šæˆæœ¬ï¼Œ...">
  <meta name="author" content="zyan">
  <link rel="icon" href="https://s2.loli.net/2022/01/24/zZjtA51NqiOEQDB.jpg" type="image/png" sizes="16x16">
  <link rel="icon" href="https://s2.loli.net/2022/01/24/zZjtA51NqiOEQDB.jpg" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="https://s2.loli.net/2022/01/24/zZjtA51NqiOEQDB.jpg" sizes="180x180">
  <meta rel="mask-icon" href="https://s2.loli.net/2022/01/24/zZjtA51NqiOEQDB.jpg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="https://s2.loli.net/2022/01/24/zZjtA51NqiOEQDB.jpg">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="https://at.alicdn.com/t/font_1445822_p6ry5n7lrr.css">

  

  
    
<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/styles/github-dark-dimmed.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/styles/github-dark-dimmed.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      loading: {
        gif: '/images/theme/loading.gif',
        lottie: ''
      },
      lazyload: {
        enable: true,
        only_post: 'true',
        loading: {
          gif: '/images/theme/loading.gif',
          lottie: ''
        }
      },
      donate: {
        enable: false,
        alipay: 'https://pic.izhaoo.com/alipay.jpg',
        wechat: 'https://pic.izhaoo.com/wechat.jpg'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        always_show: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: false
      },
      preview: {
        background: {
          default: '',
          api: ''
        },
        motto: {
          default: 'æ„¿ä½ æˆ‘æ—¢å¯ä»¥æœä¹æ™šäº”ï¼Œåˆèƒ½å¤Ÿæµªè¿¹å¤©æ¶¯',
          typing: true,
          api: '',
          data_contents: ''
        },
      },
      qrcode: {
        enable: true,
        type: 'url',
        image: 'https://pic.izhaoo.com/weapp-code.jpg',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'normal'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '',
        page_white_list: '',
        page_black_list: ''
      },
      search: {
        enable: true,
        path: '/search.xml'
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 6.0.0"></head>

<body class="lock-screen">
  <div class="loading" id="loading"></div>
  
    


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconhome j-navbar-back-home"></i>
      
      
        <i class="iconfont iconqrcode j-navbar-qrcode"></i>
      
      
        <i class="iconfont iconmoono" id="color-toggle" color-toggle="light"></i>
      
      
        <i class="iconfont iconsearch j-navbar-search"></i>
      
    </div>
    <div class="center">ç›¸å¯¹è§„èŒƒçš„æœåŠ¡APIåº”å¦‚ä½•å®ç°</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
      <div id="qrcode-navbar"></div>
    
  </nav>

  
  

<nav class="menu">
  <div class="menu-container">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> é¦–é¡µ</a>
      </li><li class="menu-item">
        <a href="/archives/ " class="underline "> å½’æ¡£</a>
      </li><li class="menu-item">
        <a href="/tags/ " class="underline "> æ ‡ç­¾</a>
      </li><li class="menu-item">
        <a href="/categories/ " class="underline "> åˆ†ç±»</a>
      </li><li class="menu-item">
        <a href="/about/ " class="underline "> å…³äº</a>
      </li></ul>
    
      <div class="menu-copyright"><a target="_blank" href="https://space.bilibili.com/124493907">å“”å“©å“”å“©</a>  |  <a target="_blank" href="https://juejin.cn/user/3702810895726344/posts">æ˜é‡‘</a>  |  <a target="_blank" href="https://gitee.com/zyan1226">Gitee</a>  |  <a target="_blank" href="https://unsplash.com/@zyan1226">Unsplash</a>  |  <a target="_blank" href="/about">å…³äº</a><br/><br/>Copyright Â© 2023 zyan. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-1"></div>
      <div class="col-xl-8"><article class="article">
  <div class="wrap">
    <section class="head">
  <img src="https://images.unsplash.com/photo-1623282033815-40b05d96c903?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8QVBJfGVufDB8fDB8fA==&auto=format&fit=crop&w=800&q=60" draggable="false">
  <div class="head-mask">
    <h1 class="head-title">ç›¸å¯¹è§„èŒƒçš„æœåŠ¡APIåº”å¦‚ä½•å®ç°</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>å…«æœˆ 18, 2022</span>
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>10405</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        
        <blockquote>
<p>æ ‡å‡†è§„èŒƒçš„æ¥å£å¯ä»¥é™ä½å‰åç«¯å¼€å‘äººå‘˜ä¹‹é—´çš„æ²Ÿé€šæˆæœ¬ï¼Œå¹¶ä¸”èƒ½å¤Ÿé™ä½åç«¯æœåŠ¡è‡ªèº«çš„åæœŸç»´æŠ¤éš¾åº¦ã€‚</p>
</blockquote>
<h1 id="è¯·æ±‚ä¸å“åº”"><a href="#è¯·æ±‚ä¸å“åº”" class="headerlink" title="è¯·æ±‚ä¸å“åº”"></a>è¯·æ±‚ä¸å“åº”</h1><p>è¯·æ±‚ä¸å“åº”å‚æ•°æ˜¯å‰åç«¯å¼€å‘äººå‘˜å¯¹æ¥çš„é‡è¦å…³æ³¨ç‚¹ï¼Œå¦‚æœåç«¯ API ä¸èƒ½å‘å‰ç«¯ï¼ˆç”šè‡³æ˜¯è‡ªå·±ï¼‰æ¸…æ™°çš„ä¼ è¾¾<strong>æˆ‘æ¥æ”¶ä»€ä¹ˆï¼Œæˆ‘è¿”å›ä»€ä¹ˆ</strong>çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¯¹äºåŒæ–¹æ¥è¯´ï¼Œè¿™éƒ½æ˜¯ä¸€ç§ç¾éš¾ã€‚</p>
<h2 id="é€šç”¨çš„-ApiResult"><a href="#é€šç”¨çš„-ApiResult" class="headerlink" title="é€šç”¨çš„ ApiResult"></a>é€šç”¨çš„ <code>ApiResult</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiResult</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">2747440445733983051L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * çŠ¶æ€</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Integer status;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String msg;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å“åº”æ•°æ®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> T payload;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¨‹åºå¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String exception;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„<code>ApiResult</code>ç¤ºä¾‹ï¼Œä½ æ‰€å¼€å‘çš„æ¯ä¸€ä¸ªæ¥å£å“åº”å‚æ•°éƒ½åº”è¯¥æ˜¯å®ƒï¼Œå®ƒæ˜¯<strong>å¤„äºé¡¶å±‚çš„å“åº”å‚æ•°ç»“æ„</strong>ï¼Œé€šè¿‡æŒ‡å®šä¸åŒçš„æ³›å‹é€‚åº”å„ä¸ªæ¥å£çš„éœ€æ±‚ã€‚å„ä¸ªå‚æ•°ä½œç”¨å¦‚ä¸‹:</p>
<ul>
<li>status <strong>çŠ¶æ€ç </strong>ï¼Œç”¨ä¸åŒçš„æ•°å­—è¡¨ç¤ºå½“å‰æ¥å£å¤„ç†å®Œæˆåçš„ç»“æœçŠ¶æ€ã€‚è¯·ä¸è¦ä¸ Http çš„çŠ¶æ€æ··ä¸ºä¸€è°ˆï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç›´æ¥ä½¿ç”¨ Http çš„çŠ¶æ€æ¥è¡¨ç¤ºã€‚ Http çš„çŠ¶æ€æ¯æ¬¡è¯·æ±‚éƒ½åº”è¯¥æ˜¯ 200 çš„ï¼Œå¤„ç†çš„ç»“æœåº”ç”±å“åº”å‚æ•°æ¥ä½“ç°ã€‚</li>
<li>msg <strong>ä¿¡æ¯</strong>ï¼Œåç«¯æœåŠ¡æç¤ºç”¨æˆ·æ¶ˆæ¯çš„ä¸»è¦é€”å¾„ï¼Œå› ä¸ºè®¸å¤šçš„æç¤ºä¿¡æ¯ï¼ˆæ­£ç¡®æˆ–é”™è¯¯ï¼‰éƒ½æ˜¯åœ¨åç«¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ‰ä¼šå‡ºç°ã€‚ä¸€èˆ¬è¿™ä¸ªä¿¡æ¯å‰ç«¯éœ€è¦ä½¿ç”¨å¼¹çª—ã€æ¨ªå¹…æˆ–å…¶ä»–æ‰‹æ®µå»ä¼ è¾¾ç»™ç”¨æˆ·ã€‚</li>
<li>payload <strong>å“åº”æ•°æ®</strong>ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯æ¥å£å“åº”çš„å…·ä½“ä¸šåŠ¡æ•°æ®ã€‚</li>
<li>exception <strong>ç¨‹åºå¼‚å¸¸ä¿¡æ¯</strong>ï¼Œç»“åˆè‡ªå·±çš„å¼€å‘ç»éªŒï¼Œè§‰å¾—éœ€è¦è¿™æ ·ä¸€ä¸ªå‚æ•°æ¥å¸®åŠ©å¼€å‘è€…æ›´å¿«çš„å®šä½é—®é¢˜ã€‚ä¾‹å¦‚å‘ç”ŸæŸä¸ªå¼‚å¸¸ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯è¯¥å¼‚å¸¸çš„å…·ä½“ä¿¡æ¯<code>e.getMessage()</code>ï¼Œæ‰€ä»¥å¼€å‘äººå‘˜åªéœ€é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·å°±èƒ½æ‰¾åˆ°å‘ç”Ÿå¼‚å¸¸çš„åŸå› ã€‚æ³¨æ„è¿™ä¸ªä¿¡æ¯æ˜¯ä¸èƒ½ä¼ è¾¾ç»™ç”¨æˆ·çš„ï¼</li>
</ul>
<p>å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯å»å‘½åè¿™äº›å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸º<code>ApiResult</code>æ‰©å±•ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œä½¿å¾—æ¥å£åœ¨æ„å»ºå“åº”å‚æ•°æ—¶æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h2 id="çŠ¶æ€ç æšä¸¾"><a href="#çŠ¶æ€ç æšä¸¾" class="headerlink" title="çŠ¶æ€ç æšä¸¾"></a>çŠ¶æ€ç æšä¸¾</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Getter</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ApiStatusEnum</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æˆåŠŸ</span><br><span class="hljs-comment">     */</span><br>    SUCCESS(<span class="hljs-number">200</span>, <span class="hljs-string">&quot;å¤„ç†æˆåŠŸ&quot;</span>),<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æœªæˆæƒï¼ˆç™»å½•ä¿¡æ¯æœ‰è¯¯ï¼Œéœ€è¦é‡æ–°ç™»å½•ï¼‰</span><br><span class="hljs-comment">     */</span><br>    UNAUTHORIZED(<span class="hljs-number">401</span>, <span class="hljs-string">&quot;æœªæˆæƒï¼ˆç™»å½•ä¿¡æ¯æœ‰è¯¯ éœ€è¦é‡æ–°ç™»å½•ï¼‰&quot;</span>),<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ— æ“ä½œæƒé™</span><br><span class="hljs-comment">     */</span><br>    NO_PERMISSIONS(<span class="hljs-number">403</span>, <span class="hljs-string">&quot;æ— æ“ä½œæƒé™&quot;</span>),<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤±è´¥</span><br><span class="hljs-comment">     */</span><br>    FAIL(<span class="hljs-number">500</span>, <span class="hljs-string">&quot;å¤„ç†å¤±è´¥&quot;</span>);<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * çŠ¶æ€ç </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer status;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æç¤ºæ¶ˆæ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String msg;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªçŠ¶æ€ç æšä¸¾ç¤ºä¾‹ï¼Œå®ƒçš„<code>status</code>æœ€ç»ˆä¼šä½“ç°åœ¨<code>ApiResult</code>çš„<code>status</code>ä¸­ï¼Œå‰ç«¯å¾—ä»¥æ ¹æ®ä¸åŒçš„çŠ¶æ€ç è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œæ·»åŠ ã€‚å¯ä»¥å‚è€ƒ http æ ‡å‡†çš„çŠ¶æ€ç åˆ—ä¸¾ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¸šåŠ¡ç›¸è¿‘çš„ http çŠ¶æ€ç å°‘ä¹‹åˆå°‘ï¼Œæ‰€ä»¥<strong>æŒ‰ç…§æ•°å­—é¡ºåºä¸æ–­è‡ªå¢åˆ—ä¸¾</strong>çš„æ–¹å¼ä¹Ÿæ˜¯å¯å–çš„ã€‚</p>
<h2 id="ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°"><a href="#ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°" class="headerlink" title="ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°"></a>ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°</h2><p><strong>ä¸€ä¸ªä¼˜ç§€çš„ API æ¥å£ï¼Œæ˜¯ä¸éœ€è¦ç¿»é˜…å…·ä½“ä»£ç å°±èƒ½çŸ¥é“å®ƒçš„è¯·æ±‚ä¸å“åº”å‚æ•°çš„ã€‚</strong></p>
<p>ä¸çŸ¥é“æœ‰å¤šå°‘äººå–œæ¬¢ä½¿ç”¨<code>Map</code>æˆ–è€…ç±»ä¼¼äº<code>Map</code>çš„ç±»å»æ¥æ”¶å’Œå“åº”æ•°æ®ï¼Œç”šè‡³æ˜¯ä½¿ç”¨<code>String</code>æ­é…ä¸€äº› Json å·¥å…·å»å¤„ç†ã€‚è¿™æ˜¯éå¸¸æ„šè ¢çš„æ“ä½œã€‚å½“ç„¶ï¼Œçˆ½æ˜¯çœŸçš„çˆ½ï¼Œä½†æ˜¯è¿™æ ·çš„çˆ½éå¸¸è‡ªç§ã€‚å¯¹äºè°ƒç”¨è€…<sub>1</sub>æ¥è¯´ï¼Œè¿™æ ·çš„çš„æ¥å£å°±åƒæ˜¯ä¸€ä¸ªé»‘ç›’å­ï¼Œå¿…é¡»ç¿»é˜…å…·ä½“çš„ä»£ç æ‰èƒ½çœ‹åˆ°å®ƒæ¥æ”¶ä»€ä¹ˆã€è¿”å›ä»€ä¹ˆã€‚å¯æ˜¯ä»–åªæƒ³è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªæ¥å£ï¼Œè‡³äºé‡Œè¾¹æ€ä¹ˆåšçš„ä»–ä¸éœ€è¦å…³å¿ƒã€‚è¿™åˆç†å—ï¼Ÿè¿™ä¸€ç‚¹éƒ½ä¸åˆç†ï¼</p>
<p>ä½¿ç”¨å®ä½“ç±»å£°æ˜å°±èƒ½å¾ˆå¥½çš„é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿä¸¥æ ¼è§„å®šè¿™ä¸ªæ¥å£çš„è¯·æ±‚ä¸è¿”å›ï¼Œä¸æ˜¯<code>Map</code>ã€<code>String</code>è¿™æ ·çš„â€œæ¥è€…ä¸æ‹’â€œã€‚</p>
<p>[1] è°ƒç”¨è€…ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œè®¸å¤šæ¥å£ä¸ä»…å‘å‰ç«¯æä¾›ï¼Œä¹Ÿä¼šå‘å…¶ä»–æœåŠ¡æä¾›ï¼Œæ­¤å¤„çš„è°ƒç”¨è€…æŒ‡åç«¯å¼€å‘äººå‘˜ã€‚</p>
<h3 id="å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»"><a href="#å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»" class="headerlink" title="å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»"></a>å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»</h3><p>ä¸ªäººç»éªŒï¼Œè§‰å¾—<strong>æ¯ä¸€ä¸ªæ¥å£éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å‚æ•°å®ä½“ç±»</strong>ã€‚</p>
<p>ä¸€äº›äººå–œæ¬¢ä½¿ç”¨<code>DTO</code>å’Œ<code>VO</code>ä½œä¸ºåç¼€å‘½åæ¥å£çš„å‚æ•°ï¼Œæˆ‘ä¸ªäººæ›´å–œæ¬¢ä½¿ç”¨<code>Req</code>å’Œ<code>Res</code>ä½œä¸ºåç¼€ï¼Œä¹Ÿå‘ä½ æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒæ›´åŠ çš„è´´åˆ‡ã€ä¸€ç›®äº†ç„¶ã€‚</p>
<p>ä¸¾ä¸€ä¸ªæ —å­ğŸŒ°ï¼Œæœ‰ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ã€è¿˜æœ‰ä¸€ä¸ªæ–°å¢ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ï¼Œé‚£ä¹ˆå®ƒçš„å‚æ•°å®ä½“ç±»ä½ç½®ä»¥åŠå‘½ååº”è¯¥åƒä¸‹é¢è¿™ä¸ªæ ·å­:</p>
<hr>
<ul>
<li>controller<ul>
<li>UserController.java <code>/user</code><ul>
<li><code>/pageList</code>æ¥å£ï¼Œæ–¹æ³•åä¸º<code>pageList</code></li>
<li><code>/add</code> æ¥å£ï¼Œæ–¹æ³•åä¸º<code>add</code></li>
</ul>
</li>
</ul>
</li>
<li>mapper</li>
<li>pojo<ul>
<li>dto<ul>
<li>user<ul>
<li>pagelist<ul>
<li>UserPageListReq.java</li>
<li>UserPageListRes.java</li>
</ul>
</li>
<li>add<ul>
<li>UserAddReq.java</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>entity</li>
<li>properties</li>
<li>redis</li>
</ul>
</li>
<li>service</li>
<li>utils</li>
</ul>
<hr>
<p>å…ˆåˆ«æ€¥ç€éª‚ï¼è¿™æ ·å»ç®¡ç†è¿™äº›å®ä½“ç±»çš„ç¡®ç›®å½•å±‚çº§è¾ƒå¤šï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ä½†æ˜¯<strong>è§„èŒƒä¸æ•ˆç‡ä¸¤ä»¶äº‹æœ¬æ¥å°±æ˜¯ä¸å¯å…¼å¾—çš„</strong>ï¼Œåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘è‡ªå·±è¿˜æ˜¯æ¯”è¾ƒåå‘äºè§„èŒƒçš„ã€‚</p>
<p>è¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Œé¦–å…ˆå®ä½“ç±»çš„åç§°å˜å¾—æœ‰è¿¹å¯å¾ªã€æœ‰è§„å¯ä¾ã€‚å…¶æ¬¡æ¥å£å‚æ•°å®ä½“ç±»æ‰€åœ¨<code>dto</code>åŒ…ä¸‹çš„ç›®å½•å’Œæ¥å£æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæœ‰åˆ©äºä½ çœ‹åˆ°æ¥å£å‚æ•°å®ä½“ç±»å°±èƒ½å¾ˆå¿«å®šä½åˆ°ä½¿ç”¨å®ƒçš„æ¥å£ï¼Œçœ‹åˆ°æ¥å£å°±èƒ½å¾ˆå¿«å®šä½åˆ°å®ƒçš„å‚æ•°å®ä½“ç±»ã€‚æ‰€ä»¥<strong>ä»Šæ—¥æ‰€è°“çš„éº»çƒ¦æ˜¯ä¸ºäº†ä»¥åä¸ä¼šé‡åˆ°æ›´å¤šçš„éº»çƒ¦</strong>ã€‚</p>
<h1 id="æ¨èä½¿ç”¨-Swagger"><a href="#æ¨èä½¿ç”¨-Swagger" class="headerlink" title="æ¨èä½¿ç”¨ Swagger"></a>æ¨èä½¿ç”¨ Swagger</h1><p>Swagger èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œå¯ä»¥äº¤ç»™å‰ç«¯åŒäº‹ Swagger åœ°å€ä½œä¸ºæ¥å£å¯¹æ¥ä¾æ®ï¼Œå¼€å±•å·¥ä½œã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶è¿›è¡Œå¿«é€Ÿçš„æ¥å£è°ƒç”¨ï¼Œè¿›è¡Œæ¥å£è‡ªæµ‹ã€‚</p>
<h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><h3 id="æ·»åŠ ä¾èµ–å¹¶å¯ç”¨"><a href="#æ·»åŠ ä¾èµ–å¹¶å¯ç”¨" class="headerlink" title="æ·»åŠ ä¾èµ–å¹¶å¯ç”¨"></a>æ·»åŠ ä¾èµ–å¹¶å¯ç”¨</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.springfox<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springfox-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>SpringBoot å¯åŠ¨ç±»ä¸Šæ·»åŠ  <code>@EnableOpenApi</code> æ³¨è§£</strong></p>
<h3 id="åˆ›å»º-SwaggerProperties"><a href="#åˆ›å»º-SwaggerProperties" class="headerlink" title="åˆ›å»º SwaggerProperties"></a>åˆ›å»º <code>SwaggerProperties</code></h3><p>é€šè¿‡é…ç½®åœ¨<code>yml</code>æ–‡ä»¶ä¸­çš„<code>enabled</code>å‚æ•°æ¥æ§åˆ¶ä¸åŒç¯å¢ƒä¸‹Swaggeræ˜¯å¦å¼€å¯ã€‚å…³äº<code>yml</code>æ–‡ä»¶ä¸<code>@ConfigurationProperties</code>å¯ä»¥å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« <a href="/2022/03/10/Spring/correlation/SolveYmalWarn/">è§£å†³ Spring é…ç½®æ–‡ä»¶è­¦å‘Š</a>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;swagger&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwaggerProperties</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ˜¯å¦å¯ç”¨ Swaggerï¼Œé»˜è®¤å…³é—­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Boolean</span> <span class="hljs-variable">enabled</span> <span class="hljs-operator">=</span> Boolean.FALSE;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="åˆ›å»º-SwaggerConfig"><a href="#åˆ›å»º-SwaggerConfig" class="headerlink" title="åˆ›å»º SwaggerConfig"></a>åˆ›å»º <code>SwaggerConfig</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwaggerConfig</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> SwaggerProperties swaggerProperties;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Docket <span class="hljs-title function_">createRestApi</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Docket</span>(DocumentationType.OAS_30)<br>                .enable(swaggerProperties.getEnabled())<br>                .apiInfo(apiInfo())<br>                .select()<br>                <span class="hljs-comment">//æŒ‡å®šéœ€è¦è¢« Swagger æ‰«æåˆ°çš„åŒ…å</span><br>                .apis(RequestHandlerSelectors.basePackage(<span class="hljs-string">&quot;com.xxxxx.xxxx.controller&quot;</span>))<br>                .paths(PathSelectors.any())<br>                .build();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ›å»ºè¯¥APIçš„åŸºæœ¬ä¿¡æ¯ï¼ˆè¿™äº›åŸºæœ¬ä¿¡æ¯ä¼šå±•ç°åœ¨æ–‡æ¡£é¡µé¢ä¸­ï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiInfo</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> ApiInfo <span class="hljs-title function_">apiInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiInfoBuilder</span>()<br>                .title(<span class="hljs-string">&quot;xxxé¡¹ç›®&quot;</span>)<br>                .description(<span class="hljs-string">&quot;&quot;</span>)<br>                .termsOfServiceUrl(<span class="hljs-string">&quot;&quot;</span>)<br>                .version(<span class="hljs-string">&quot;1.0&quot;</span>)<br>                .build();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é¡¹ç›®å¯åŠ¨åå°±å¯ä»¥é€šè¿‡ <code>&#123;æœåŠ¡æ ¹è·¯å¾„&#125;/swagger-ui/</code> å»è®¿é—®æ–‡æ¡£äº†ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œæœ€åçš„åæ–œæ æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™æ— æ³•è®¿é—®ã€‚</p>
<h3 id="Api"><a href="#Api" class="headerlink" title="@Api"></a><code>@Api</code></h3><p><code>@Api</code>æ˜¯<strong>æ”¾ç½®åœ¨<code>Controller</code>ç±»ä¸Š</strong>çš„ï¼Œä¾‹å¦‚ç”¨æˆ·çš„<code>UserController</code>å¯ä»¥è¿™æ ·å»å†™ï¼š<code>@Api(tags = &quot;User-ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ¥å£&quot;)</code></p>
<h3 id="ApiOperation"><a href="#ApiOperation" class="headerlink" title="@ApiOperation"></a><code>@ApiOperation</code></h3><p><code>@ApiOperation</code>æ˜¯<strong>æ”¾ç½®åœ¨å…·ä½“æ¥å£ä¸Š</strong>çš„ï¼Œä¾‹å¦‚ç”¨æˆ·çš„<code>/pageList</code>æ¥å£å¯ä»¥è¿™æ ·å»å†™ï¼š<code>@ApiOperation(value = &quot;åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯&quot;)</code></p>
<h3 id="ApiModel"><a href="#ApiModel" class="headerlink" title="@ApiModel"></a><code>@ApiModel</code></h3><p><code>@ApiModel</code>æ˜¯<strong>æ”¾ç½®åœ¨è¯·æ±‚æˆ–å“åº”å®ä½“ç±»ä¸Š</strong>çš„ï¼Œä¾‹å¦‚åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°å¯ä»¥è¿™æ ·å†™ï¼š<code>@ApiModel(description = &quot;åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°&quot;)</code></p>
<h3 id="ApiModelProperty"><a href="#ApiModelProperty" class="headerlink" title="@ApiModelProperty"></a><code>@ApiModelProperty</code></h3><p><code>@ApiModelProperty</code>æ˜¯<strong>æ”¾ç½®åœ¨è¯·æ±‚æˆ–å“åº”å®ä½“ç±»çš„å±æ€§ä¸Š</strong>çš„ï¼Œä¾‹å¦‚ä¿å­˜ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°çš„å¹´é¾„å±æ€§å¯ä»¥è¿™æ ·å†™ï¼š<code>    @ApiModelProperty(value = &quot;å¹´é¾„&quot;, required = true)</code></p>
<p>å…¶ä¸­çš„<code>required</code>å¯ä»¥æŒ‡å®šæ˜¯å¦ä¸ºå¿…ä¼ å­—æ®µï¼Œä¸º <code>true</code> æ—¶æ–‡æ¡£ä¸­ä¼šä¸ºè¯¥å±æ€§æ·»åŠ çº¢è‰²æ˜Ÿå·ï¼Œä¸º <code>true</code> æ—¶å¯ä»¥å¿½ç•¥ä¸å†™ï¼Œä¾‹å¦‚<code>@ApiModelProperty(&quot;å¹´é¾„&quot;)</code>ï¼Œ<strong>æ³¨æ„ï¼Œä»–å¹¶ä¸ä¼šå¸®ä½ è¿›è¡Œå‚æ•°æ ¡éªŒï¼</strong></p>
<h2 id="æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»"><a href="#æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»" class="headerlink" title="æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»"></a>æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»</h2><p>ä¸ºä»€ä¹ˆä¼šè¯´æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»ï¼Ÿæˆ‘é‡åˆ°å¾ˆå¤šçš„é¡¹ç›®ï¼Œç”¨åˆ°äº† Swaggerï¼Œä¸€äº›æ¥å£æœ‰ä»–çš„å½±å­ï¼Œä¸€äº›æ¥å£åˆæ²¡æœ‰ä»–ï¼Œå‰åç«¯å¯¹æ¥è¿˜æ˜¯è·Ÿä¹‹å‰ä¸€æ ·å£å¤´ä¼ è¾¾ã€‚æ‰€ä»¥ï¼Œä½ è¦å®ƒæœ‰ä½•ç”¨ï¼Ÿ</p>
<h1 id="è¯·æ±‚å‚æ•°æ ¡éªŒ"><a href="#è¯·æ±‚å‚æ•°æ ¡éªŒ" class="headerlink" title="è¯·æ±‚å‚æ•°æ ¡éªŒ"></a>è¯·æ±‚å‚æ•°æ ¡éªŒ</h1><p>ä½¿ç”¨<code>org.springframework.validation.annotation</code>åŒ…ä¸‹çš„<code>@Validated</code>å¯¹è¯·æ±‚å‚æ•°è¿›è¡Œåˆæ³•æ€§æ ¡éªŒã€‚</p>
<p>å› SpringBootç‰ˆæœ¬ä¸åŒï¼Œå¯èƒ½éœ€è¦æ·»åŠ ç›¸åº”çš„ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ–‡çš„ä¿å­˜ç”¨æˆ·ä¿¡æ¯æ¥å£è¯·æ±‚å‚æ•°çš„å¹´é¾„å±æ€§ä¸ºä¾‹ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p>
<p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PostMapping(&quot;/add&quot;)</span><br><span class="hljs-meta">@ApiOperation(value = &quot;ä¿å­˜ç”¨æˆ·ä¿¡æ¯&quot;)</span><br><span class="hljs-keyword">public</span> ApiResult&lt;?&gt; add(<span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Validated</span> UserAddReq req) &#123;<br>    userService.add(req);<br>    <span class="hljs-keyword">return</span> ApiResult.success();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¯·æ±‚å‚æ•°å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.validation.constraints.NotNull;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ApiModel(description = &quot;ä¿å­˜ç”¨æˆ·ä¿¡æ¯è¯·æ±‚å‚æ•°&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAddReq</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> -<span class="hljs-number">2749806305785349883L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¹´é¾„</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@NotNull(message = &quot;å¹´é¾„ä¸å…è®¸ä¸ºç©º&quot;)</span><br>    <span class="hljs-meta">@ApiModelProperty(value = &quot;å¹´é¾„&quot;, required = true)</span><br>    <span class="hljs-keyword">private</span> Integer age;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>é€šè¿‡<code>@NotNull</code>æ¥æŒ‡å®š<code>age</code>å­—æ®µä¸å…è®¸ä¸º<code>null</code>ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šçš„æ ¡éªŒæ³¨è§£å¯ä»¥ä½¿ç”¨ï¼Œå¯ä»¥<a target="_blank" rel="noopener" href="https://javaee.github.io/javaee-spec/javadocs/javax/validation/constraints/package-summary.html">ç‚¹å‡»è·³è½¬æŸ¥é˜…æ›´å¤š</a></p>
<p>æ ¡éªŒä¸é€šè¿‡æ—¶ï¼Œç¨‹åºå°†ä¼šæŠ›å‡ºå¼‚å¸¸æ¥é˜»æ­¢ç»§ç»­è¿è¡Œï¼å°†åœ¨ä¸‹æ–‡ä¸­è¯´æ˜å¦‚ä½•ä¼˜é›…çš„å¤„ç†æ ¡éªŒä¸é€šè¿‡æ—¶çš„é”™è¯¯ã€‚</p>
<h1 id="å…¨å±€å¼‚å¸¸å¤„ç†"><a href="#å…¨å±€å¼‚å¸¸å¤„ç†" class="headerlink" title="å…¨å±€å¼‚å¸¸å¤„ç†"></a>å…¨å±€å¼‚å¸¸å¤„ç†</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.sincland.insurance.partner.config;<br><br><span class="hljs-keyword">import</span> com.sincland.insurance.partner.exception.BusinessException;<br><span class="hljs-keyword">import</span> com.sincland.insurance.partner.pojo.other.ApiResult;<br><span class="hljs-keyword">import</span> org.apache.commons.lang3.ObjectUtils;<br><span class="hljs-keyword">import</span> org.slf4j.Logger;<br><span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<br><span class="hljs-keyword">import</span> org.springframework.http.converter.HttpMessageNotReadableException;<br><span class="hljs-keyword">import</span> org.springframework.validation.BindingResult;<br><span class="hljs-keyword">import</span> org.springframework.validation.FieldError;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.MethodArgumentNotValidException;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¼‚å¸¸å¤„ç†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@RestControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionHandlerConfig</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(<span class="hljs-built_in">this</span>.getClass());<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†å…¶ä»–æ‰€æœ‰å¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = Exception.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; exceptionHandler(HttpServletRequest req, Exception e) &#123;<br>        String msg;<br>        <span class="hljs-keyword">if</span> (ObjectUtils.isNotEmpty(e.getCause())) &#123;<br>            msg = e.getCause().getMessage();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            msg = e.getMessage();<br>        &#125;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; å‘ç”Ÿè¿è¡Œæ—¶å¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), msg);<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> ApiResult.exception(msg);<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¡éªŒå‚æ•°å¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req HttpServletRequest</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = MethodArgumentNotValidException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; handleMethodArgumentNotValidException(HttpServletRequest req, MethodArgumentNotValidException e) &#123;<br>        <span class="hljs-type">BindingResult</span> <span class="hljs-variable">bindingResult</span> <span class="hljs-operator">=</span> e.getBindingResult();<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">&quot;è¯·æ±‚å‚æ•°æ ¡éªŒä¸é€šè¿‡: &quot;</span>);<br>        <span class="hljs-keyword">for</span> (FieldError fieldError : bindingResult.getFieldErrors()) &#123;<br>            msg.append(fieldError.getField()).append(<span class="hljs-string">&quot;:&quot;</span>).append(fieldError.getDefaultMessage()).append(<span class="hljs-string">&quot;ï¼Œ&quot;</span>);<br>        &#125;<br>        msg.replace(msg.length() - <span class="hljs-number">1</span>, msg.length(), <span class="hljs-string">&quot;&quot;</span>);<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; &#123;&#125;&quot;</span>, req.getRequestURI(), msg);<br>        <span class="hljs-keyword">return</span> ApiResult.exception(msg.toString());<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†ä¸šåŠ¡å¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = BusinessException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; businessExceptionHandler(HttpServletRequest req, BusinessException e) &#123;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; å‘ç”Ÿä¸šåŠ¡æ€§å¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), e.getMessage());<br>        <span class="hljs-keyword">return</span> e.getApiResultIsException() ? ApiResult.exception(e.getStatus(), e.getMessage())<br>                : ApiResult.fail(e.getStatus(), e.getMessage());<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = NullPointerException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; nullPointerExceptionHandler(HttpServletRequest req, NullPointerException e) &#123;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), e.getStackTrace()[<span class="hljs-number">0</span>]);<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> ApiResult.exception(<span class="hljs-string">&quot;å‘ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸:&quot;</span> + e.getStackTrace()[<span class="hljs-number">0</span>]);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¯·æ±‚æ¶ˆæ¯æ— æ³•è§£æå¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> req è¯·æ±‚å‚æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> e   å¼‚å¸¸ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ApiResult</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ExceptionHandler(value = HttpMessageNotReadableException.class)</span><br>    <span class="hljs-keyword">public</span> ApiResult&lt;?&gt; httpMessageNotReadableExceptionHandler(HttpServletRequest req, HttpMessageNotReadableException e) &#123;<br>        log.error(<span class="hljs-string">&quot;æ¥å£:&#123;&#125; è¯·æ±‚æ¶ˆæ¯æ— æ³•è§£æå¼‚å¸¸:&#123;&#125;&quot;</span>, req.getRequestURI(), e.getMessage());<br>        e.printStackTrace();<br>        <span class="hljs-keyword">return</span> ApiResult.fail(<span class="hljs-string">&quot;è¯·æ£€æŸ¥è¯·æ±‚ä½“æ ¼å¼&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¯ä»¥é€šè¿‡<code>@ExceptionHandler</code>æŒ‡å®šå„å¼å„æ ·çš„å¼‚å¸¸å¤„ç†ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰çš„å¼‚å¸¸ã€Java å†…ç½®çš„å¼‚å¸¸ã€æ ¡éªŒå‚æ•°å¼‚å¸¸<code>MethodArgumentNotValidException</code>ã€‚é€šè¿‡ä¸<code>ApiResult</code>è”åŠ¨ï¼Œè¾¾åˆ°å³ä½¿ç¨‹åºå¼‚å¸¸ï¼Œä¹Ÿä¼šæŒ‰ç…§æ­£å¸¸çš„æ•°æ®æ ¼å¼è¿›è¡Œå“åº”ã€‚</p>
<p>ä¹Ÿå¯ä»¥å®ç°åœ¨æœåŠ¡å±‚éœ€è¦è¿”å›ä¸€äº›ä¸šåŠ¡æ€§é”™è¯¯ï¼Œä½†ä½ çš„æ–¹æ³•è¿”å›å€¼å´ä¸æ˜¯<code>ApiResult</code>ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠ›å‡ºä¸€äº›è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå†åœ¨<code>ExceptionHandlerConfig</code>ä¸­è¿›è¡Œå¤„ç†ã€‚</p>

      </section>
      <section class="extra">
        
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-%E5%9F%BA%E7%A1%80/" rel="tag">Spring åŸºç¡€</a></li></ul> 

        
  <nav class="nav">
    <a href="/2022/08/19/Java/JavaBase/ConvertListToTree/"><i class="iconfont iconleft"></i>å°†Listè½¬æ¢ä¸ºæ ‘å½¢ç»“æ„</a>
    <a href="/2022/03/10/Spring/correlation/SolveYmalWarn/">è§£å†³ Spring é…ç½®æ–‡ä»¶è­¦å‘Š<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
        <section class="comments">
  
  
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<div id="gitalk" class="gitalk"></div>
<script defer src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  window.onload = function () {
    var gitalk = new Gitalk({
      clientID: 'a5bf4e51840a753f6321',
      clientSecret: '5f6d66a8399eeca0ef8206239c40032e4e082ffa',
      id: window.location.pathname,
      repo: 'gitalk',
      owner: 'zyan1226',
      admin: 'zyan1226'
    });
    if ( false ) {
      $("#comments-btn").on("click", function () {
        $(this).hide();
        gitalk.render('gitalk');
      });
    } else {
      gitalk.render('gitalk');
    }
  }
</script>

</section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
  <aside class="toc-wrap">
    <h3 class="toc-title">æ–‡ç« ç›®å½•ï¼š</h3>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94"><span class="toc-text">è¯·æ±‚ä¸å“åº”</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E7%9A%84-ApiResult"><span class="toc-text">é€šç”¨çš„ ApiResult</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%A0%81%E6%9E%9A%E4%B8%BE"><span class="toc-text">çŠ¶æ€ç æšä¸¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%A3%B0%E6%98%8E%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94%E5%8F%82%E6%95%B0"><span class="toc-text">ä½¿ç”¨å®ä½“ç±»å£°æ˜è¯·æ±‚ä¸å“åº”å‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E8%BF%99%E4%BA%9B%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-text">å¦‚ä½•ç®¡ç†è¿™äº›å®ä½“ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8-Swagger"><span class="toc-text">æ¨èä½¿ç”¨ Swagger</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">åŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96%E5%B9%B6%E5%90%AF%E7%94%A8"><span class="toc-text">æ·»åŠ ä¾èµ–å¹¶å¯ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-SwaggerProperties"><span class="toc-text">åˆ›å»º SwaggerProperties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-SwaggerConfig"><span class="toc-text">åˆ›å»º SwaggerConfig</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Api"><span class="toc-text">@Api</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ApiOperation"><span class="toc-text">@ApiOperation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ApiModel"><span class="toc-text">@ApiModel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ApiModelProperty"><span class="toc-text">@ApiModelProperty</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A2%E7%84%B6%E7%94%A8%E4%BA%86%E5%B0%B1%E8%90%BD%E5%AE%9E%E4%B8%8B%E5%8E%BB"><span class="toc-text">æ—¢ç„¶ç”¨äº†å°±è½å®ä¸‹å»</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C"><span class="toc-text">è¯·æ±‚å‚æ•°æ ¡éªŒ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">å…¨å±€å¼‚å¸¸å¤„ç†</span></a></li></ol>
  </aside>

        
      </div>
    </div>
  </div>
</main>
  

<footer class="footer">
  <div class="footer-social"><a 
        href="tencent://message/?Menu=yes&uin=1113882975 "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#e94328" 
        onMouseOut="this.style.color='#18191b'">
          <i class="iconfont  iconQQ"></i>
      </a><a 
        href="https://github.com/zyan1226 "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#e94328" 
        onMouseOut="this.style.color='#18191b'">
          <i class="iconfont  icongithub-fill"></i>
      </a><a 
        href="mailto:zyan1226@163.com "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#e94328" 
        onMouseOut="this.style.color='#18191b'">
          <i class="iconfont  iconmail"></i>
      </a></div>
  
    <div class="footer-copyright"><a target="_blank" href="https://space.bilibili.com/124493907">å“”å“©å“”å“©</a>  |  <a target="_blank" href="https://juejin.cn/user/3702810895726344/posts">æ˜é‡‘</a>  |  <a target="_blank" href="https://gitee.com/zyan1226">Gitee</a>  |  <a target="_blank" href="https://unsplash.com/@zyan1226">Unsplash</a>  |  <a target="_blank" href="/about">å…³äº</a><br/><br/>Copyright Â© 2023 zyan. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</div>
  
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
  
  
    
<script src="/js/color-mode.js"></script>

  
  
    <div class="search">
  <div class="search-container">
    <div class="search-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <div class="search-input-wrapper">
      <i class="search-input-icon iconfont iconsearch"></i>
      <input class="search-input" type="search" id="search-input" placeholder="Search..." autofocus autocomplete="off"
        autocorrect="off" autocapitalize="off">
    </div>
    <div class="search-output" id="search-output"></div>
  </div>
</div>
  
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>





  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>




  
<script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>






  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>




<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>







  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>



  <script defer src='https://hm.baidu.com/hm.js?2bac3d80813084efd7f9788ca0682f2a'></script>











</html>